# Java åŸºç¡€çŸ¥è¯†

### 1. ç»§æ‰¿ï¼Œå¤šæ€ï¼Œå°è£…ï¼ŒæŠ½è±¡



### 2. é‡å†™å’Œé‡è½½çš„åŒºåˆ«

####  	2.1é‡å†™

â€‹			ä»å­—é¢ä¸Šçœ‹ï¼Œé‡å†™å°±æ˜¯ é‡æ–°å†™ä¸€éçš„æ„æ€ã€‚å…¶å®å°±æ˜¯**åœ¨å­ç±»ä¸­æŠŠçˆ¶ç±»æœ¬èº«æœ‰çš„æ–¹æ³•**é‡æ–°å†™ä¸€éã€‚å­ç±»ç»§æ‰¿äº†çˆ¶ç±»åŸæœ‰çš„æ–¹æ³•ï¼Œä½†æœ‰æ—¶å­ç±»å¹¶ä¸æƒ³åŸå°ä¸åŠ¨		çš„ç»§æ‰¿çˆ¶ç±»ä¸­çš„æŸä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥**åœ¨æ–¹æ³•åï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›ç±»å‹(é™¤è¿‡å­ç±»ä¸­æ–¹æ³•çš„è¿”å›å€¼æ˜¯çˆ¶ç±»ä¸­æ–¹æ³•è¿”å›å€¼çš„å­ç±»æ—¶)éƒ½ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œ** å¯¹æ–¹æ³•ä½“è¿›è¡Œä¿®æ”¹		æˆ–é‡å†™ï¼Œè¿™å°±æ˜¯é‡å†™ã€‚ä½†è¦æ³¨æ„**å­ç±»å‡½æ•°çš„è®¿é—®ä¿®é¥°æƒé™ä¸èƒ½å°‘äºçˆ¶ç±»çš„ã€‚**

#### 	  2.2é‡è½½

â€‹			åœ¨ä¸€ä¸ªç±»ä¸­ï¼ŒåŒåçš„æ–¹æ³•å¦‚æœæœ‰ä¸åŒçš„å‚æ•°åˆ—è¡¨ï¼ˆ**å‚æ•°ç±»å‹ä¸åŒã€å‚æ•°ä¸ªæ•°ä¸åŒç”šè‡³æ˜¯å‚æ•°é¡ºåºä¸åŒ**ï¼‰åˆ™è§†ä¸ºé‡è½½ã€‚åŒæ—¶ï¼Œé‡è½½å¯¹è¿”å›ç±»å‹æ²¡æœ‰è¦æ±‚ï¼Œå¯ä»¥		ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒï¼Œä½†**ä¸èƒ½é€šè¿‡è¿”å›ç±»å‹æ˜¯å¦ç›¸åŒæ¥åˆ¤æ–­é‡è½½**ã€‚



### 3. ç±»åŠ è½½é¡ºåº

â€‹		çˆ¶ç±»çš„é™æ€å­—æ®µâ€”â€”>çˆ¶ç±»é™æ€ä»£ç å—â€”â€”>å­ç±»é™æ€å­—æ®µâ€”â€”>å­ç±»é™æ€ä»£ç å—â€”â€”>

â€‹		çˆ¶ç±»æˆå‘˜å˜é‡ï¼ˆéé™æ€å­—æ®µï¼‰â€”â€”>çˆ¶ç±»éé™æ€ä»£ç å—â€”â€”>çˆ¶ç±»æ„é€ å™¨â€”â€”>å­ç±»æˆå‘˜å˜é‡â€”â€”>å­ç±»éé™æ€ä»£ç å—â€”â€”>å­ç±»æ„é€ å™¨



### 4. final å…³é”®å­—çš„ä½œç”¨

#### 	4.1ç”¨æ¥ä¿®é¥°ä¸€ä¸ªå¼•ç”¨

   	1.å¦‚æœå¼•ç”¨ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™è¯¥å¼•ç”¨ä¸ºå¸¸é‡ï¼Œè¯¥å€¼æ— æ³•ä¿®æ”¹ï¼›

â€‹	   2.å¦‚æœå¼•ç”¨ä¸ºå¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å¯¹è±¡ã€æ•°ç»„ï¼Œåˆ™è¯¥å¯¹è±¡ã€æ•°ç»„æœ¬èº«å¯ä»¥ä¿®æ”¹ï¼Œä½†æŒ‡å‘è¯¥å¯¹è±¡æˆ–æ•°ç»„çš„åœ°å€çš„å¼•ç”¨ä¸èƒ½ä¿®æ”¹ã€‚

â€‹	   3.å¦‚æœå¼•ç”¨æ—¶ç±»çš„æˆå‘˜å˜é‡ï¼Œåˆ™å¿…é¡»å½“åœºèµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ã€‚	

```java
final class Person {
    String name ="zs";    //3. æ­¤å¤„ä¸èµ‹å€¼ä¼šæŠ¥é”™
    //final int age;
    final int age = 10;
}
public class Demo01 {
    public static void main(String[] args) {        //1. åŸºæœ¬æ•°ç»„ç±»å‹ä¸ºå¸¸é‡ï¼Œæ— æ³•ä¿®æ”¹
        final int i = 9;
        //i = 10;               //2. åœ°å€ä¸èƒ½ä¿®æ”¹ï¼Œä½†æ˜¯å¯¹è±¡æœ¬èº«çš„å±æ€§å¯ä»¥ä¿®æ”¹
        Person p = new Person();
        p.name = "lisi";
        final int[] arr = {1,2,3,45};
        arr[3] = 999;
        //arr = new int[]{1,4,56,78};
    }
}
```

#### 	 

#### 	   4.2ç”¨æ¥ä¿®é¥°ä¸€ä¸ªæ–¹æ³•

  			å½“ä½¿ç”¨finalä¿®é¥°æ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å°†æˆä¸ºæœ€ç»ˆæ–¹æ³•ï¼Œæ— æ³•è¢«å­ç±»é‡å†™ã€‚ä½†æ˜¯ï¼Œè¯¥æ–¹æ³•ä»ç„¶å¯ä»¥è¢«ç»§æ‰¿ã€‚

#### 	 

####  	  4.3ç”¨æ¥ä¿®é¥°ç±»

â€‹             å½“ç”¨finalä¿®æ”¹ç±»æ—¶ï¼Œè¯¥ç±»æˆä¸ºæœ€ç»ˆç±»ï¼Œæ— æ³•è¢«ç»§æ‰¿ã€‚ç®€ç§°ä¸ºâ€œæ–­å­ç»å­™ç±»â€ã€‚



### 5. static å…³é”®å­—çš„ä½œç”¨

> å‚è€ƒæ–‡çŒ®ï¼šhttps://www.cnblogs.com/swisszhang/p/9892992.html
>

staticå…³é”®å­—æœ€åŸºæœ¬çš„ç”¨æ³•æ˜¯ï¼š

#### 	5.1 è¢«staticä¿®é¥°çš„å˜é‡å±äºç±»å˜é‡ï¼Œå¯ä»¥é€šè¿‡**ç±»å.å˜é‡å**ç›´æ¥å¼•ç”¨ï¼Œè€Œä¸éœ€è¦newå‡ºä¸€ä¸ªç±»æ¥

#### 	5.2 è¢«staticä¿®é¥°çš„æ–¹æ³•å±äºç±»æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡**ç±»å.æ–¹æ³•å**ç›´æ¥å¼•ç”¨ï¼Œè€Œä¸éœ€è¦newå‡ºä¸€ä¸ªç±»æ¥

â€‹	 5.3 è¢«staticä¿®é¥°çš„å˜é‡ã€è¢«staticä¿®é¥°çš„æ–¹æ³•ç»Ÿä¸€å±äºç±»çš„**é™æ€èµ„æºï¼Œæ˜¯ç±»å®ä¾‹ä¹‹é—´å…±äº«çš„ï¼Œæ¢è¨€ä¹‹ï¼Œä¸€å¤„å˜ã€å¤„å¤„å˜**ã€‚JDKæŠŠä¸åŒçš„é™æ€èµ„æºæ”¾åœ¨äº†ä¸åŒçš„ç±»		   ä¸­è€Œä¸æŠŠæ‰€æœ‰é™æ€èµ„æºæ”¾åœ¨ä¸€ä¸ªç±»é‡Œé¢ï¼Œå¾ˆå¤šäººå¯èƒ½æƒ³å½“ç„¶è®¤ä¸ºå½“ç„¶è¦è¿™ä¹ˆåšï¼Œä½†æ˜¯æ˜¯å¦æƒ³è¿‡ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿä¸ªäººè®¤ä¸ºä¸»è¦æœ‰ä¸‰ä¸ªå¥½å¤„ï¼š

â€‹			1ã€ä¸åŒçš„ç±»æœ‰è‡ªå·±çš„é™æ€èµ„æºï¼Œè¿™å¯ä»¥å®ç°é™æ€èµ„æºåˆ†ç±»ã€‚æ¯”å¦‚å’Œæ•°å­¦ç›¸å…³çš„é™æ€èµ„æºæ”¾åœ¨java.lang.Mathä¸­ï¼Œå’Œæ—¥å†ç›¸å…³çš„é™æ€èµ„æºæ”¾åœ¨  java.util.Calendarä¸­ï¼Œè¿™æ ·å°±å¾ˆæ¸…æ™°äº†

â€‹			2ã€é¿å…é‡åã€‚ä¸åŒçš„ç±»ä¹‹é—´æœ‰é‡åçš„é™æ€å˜é‡åã€é™æ€æ–¹æ³•åä¹Ÿæ˜¯å¾ˆæ­£å¸¸çš„ï¼Œå¦‚æœæ‰€æœ‰çš„éƒ½æ”¾åœ¨ä¸€èµ·ä¸å¯é¿å…çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯åå­—é‡å¤ï¼Œè¿™æ—¶å€™æ€ä¹ˆåŠï¼Ÿ		åˆ†ç±»æ”¾ç½®å°±å¥½äº†ã€‚

â€‹			3ã€é¿å…é™æ€èµ„æºç±»æ— é™è†¨èƒ€ï¼Œè¿™å¾ˆå¥½ç†è§£ã€‚



### 6.==å’Œ equals çš„åŒºåˆ«

####  6.1 ==

â€‹     å¯¹äºåŸºæœ¬ç±»å‹æ¥è¯´æ˜¯å€¼æ¯”è¾ƒï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´æ˜¯æ¯”è¾ƒçš„æ˜¯å¼•ç”¨

####  6.2 equals 

â€‹	é»˜è®¤æƒ…å†µä¸‹æ˜¯å¼•ç”¨æ¯”è¾ƒï¼Œåªæ˜¯å¾ˆå¤šç±»é‡æ–°äº† equals æ–¹æ³•ï¼Œæ¯”å¦‚ Stringã€Integer ç­‰æŠŠå®ƒ å˜æˆäº†å€¼æ¯”è¾ƒï¼Œ

æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ equals æ¯”è¾ƒçš„æ˜¯å€¼æ˜¯å¦ç›¸ç­‰ã€‚



### 7. hashCode()ä¸ equals()

â€‹	  1.equals()ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡ä»–ä»¬çš„hashCode()è‚¯å®šç›¸ç­‰ï¼Œä¹Ÿå°±æ˜¯ç”¨equal()å¯¹æ¯”æ˜¯ç»å¯¹å¯é çš„ã€‚

â€‹      2.hashCode()ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡ä»–ä»¬çš„equals()ä¸ä¸€å®šç›¸ç­‰ï¼Œä¹Ÿå°±æ˜¯hashCode()ä¸æ˜¯ç»å¯¹å¯é çš„ã€‚



### 8. Java æ³›å‹äº†è§£ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯ç±»å‹æ“¦é™¤ï¼Ÿä»‹ç»ä¸€ä¸‹å¸¸ç”¨çš„é€šé…ç¬¦ï¼Ÿ

> å‚è€ƒæ–‡çŒ®ï¼š[https://www.cnblogs.com/demingblog/p/5495610.html](https://www.cnblogs.com/demingblog/p/5495610.html)
>

#### 8.1 ä»€ä¹ˆæ˜¯ Java æ³›å‹

â€‹	æ³›å‹æ˜¯Java SE 1.5çš„æ–°ç‰¹æ€§ï¼Œæ³›å‹çš„æœ¬è´¨æ˜¯å‚æ•°åŒ–ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æ“ä½œçš„æ•°æ®ç±»å‹è¢«æŒ‡å®šä¸ºä¸€ä¸ªå‚æ•°ã€‚
â€‹	è¿™ç§å‚æ•°ç±»å‹å¯ä»¥ç”¨åœ¨ç±»ã€æ¥å£å’Œæ–¹æ³•çš„åˆ›å»ºä¸­ï¼Œåˆ†åˆ«ç§°ä¸ºæ³›å‹ç±»ã€æ³›å‹æ¥å£ã€æ³›å‹æ–¹æ³•ã€‚

>   é€šä¿—çš„è®²ï¼Œæ³›å‹å°±æ˜¯æ“ä½œç±»å‹çš„ å ä½ç¬¦ï¼Œå³ï¼šå‡è®¾å ä½ç¬¦ä¸ºTï¼Œé‚£ä¹ˆæ­¤æ¬¡å£°æ˜çš„æ•°æ®ç»“æ„æ“ä½œçš„æ•°æ®ç±»å‹ä¸ºTç±»å‹ã€‚



#### 8.2 ä»€ä¹ˆæ˜¯ç±»å‹æ“¦é™¤

ã€€å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼ŒOperateç±»å¦‚ä¸‹ï¼š

```java
public class Operate {

    public static void main(String[] args) {
        List<String> names=new ArrayList<String>();
        names.add("Jack");
        names.add("Tom");
        names.add("peter");
        for(String name:names){
            System.out.println("wellcome:"+name);
        }
    }

}
```

å…¶å¯¹åº”çš„classæ–‡ä»¶**åç¼–è¯‘**ä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨*java-guiåç¼–è¯‘.exe*  æŸ¥çœ‹ç¼–è¯‘ä¹‹åçš„ä»£ç å¦‚ä¸‹

```java
public class Operate {
    public static void main(String[] args) {
        List names=new ArrayList();
        names.add("Jack");
        names.add("Tom");
        names.add("peter");
        for(String name:names){
            System.out.println("wellcome:"+name);
        }
    }
}
```

> å‘ç°æ²¡æœ‰ï¼Œæ ¹æœ¬æ²¡æœ‰<String> è¿™ä¸€éƒ¨åˆ†äº†ã€‚è¿™ä¸ªé™åˆ¶ä¸ºStringç±»å‹çš„æ³›å‹è¢«â€œæ“¦é™¤â€äº†ã€‚å†™ä»£ç çš„æ—¶å€™ï¼Œæ³›å‹ä¼šåšæ ¡éªŒï¼Œç±»å‹ä¸å¯¹åº”çš„ï¼Œæ— æ³•add,ä½†æ˜¯ç¼–è¯‘ä¹‹åè¾¹å»æ‰äº†æ³›å‹ç±»å‹



#### 8.3 æ³›å‹é€šé…ç¬¦

æˆ‘ä»¬åœ¨å®šä¹‰æ³›å‹ç±»ï¼Œæ³›å‹æ–¹æ³•ï¼Œæ³›å‹æ¥å£çš„æ—¶å€™ç»å¸¸ä¼šç¢°è§å¾ˆå¤šä¸åŒçš„é€šé…ç¬¦ï¼Œæ¯”å¦‚ Tï¼ŒEï¼ŒKï¼ŒV ç­‰ç­‰ï¼Œè¿™äº›é€šé…ç¬¦åˆéƒ½æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ

**å¸¸ç”¨çš„ Tï¼ŒEï¼ŒKï¼ŒVï¼Œï¼Ÿ**

æœ¬è´¨ä¸Šè¿™äº›ä¸ªéƒ½æ˜¯é€šé…ç¬¦ï¼Œæ²¡å•¥åŒºåˆ«ï¼Œåªä¸è¿‡æ˜¯ç¼–ç æ—¶çš„ä¸€ç§çº¦å®šä¿—æˆçš„ä¸œè¥¿ã€‚æ¯”å¦‚ä¸Šè¿°ä»£ç ä¸­çš„ T ï¼Œæˆ‘ä»¬å¯ä»¥æ¢æˆ A-Z ä¹‹é—´çš„ä»»ä½•ä¸€ä¸ª å­—æ¯éƒ½å¯ä»¥ï¼Œå¹¶ä¸ä¼šå½±å“ç¨‹åºçš„æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯å¦‚æœæ¢æˆå…¶ä»–çš„å­—æ¯ä»£æ›¿ T ï¼Œåœ¨å¯è¯»æ€§ä¸Šå¯èƒ½ä¼šå¼±ä¸€äº›ã€‚**é€šå¸¸æƒ…å†µä¸‹ï¼ŒTï¼ŒEï¼ŒKï¼ŒVï¼Œï¼Ÿ æ˜¯è¿™æ ·çº¦å®šçš„ï¼š**

- ï¼Ÿ è¡¨ç¤ºä¸ç¡®å®šçš„ java ç±»å‹
- T (type) è¡¨ç¤ºå…·ä½“çš„ä¸€ä¸ªjavaç±»å‹
- K V (key value) åˆ†åˆ«ä»£è¡¨javaé”®å€¼ä¸­çš„Key Value
- E (element) ä»£è¡¨Element



### 9.  Java ä¸­çš„å‡ ç§åŸºæœ¬æ•°æ®ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿå¯¹åº”çš„åŒ…è£…ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿå„è‡ªå ç”¨å¤šå°‘å­—èŠ‚å‘¢ï¼Ÿ

![9-1](picture\9-1.png)

![9-2](picture\9-2.jpg)





###  10. Collection é›†åˆå¦‚ä½•æ’åº

â€‹		æœ‰ä¸€ä¸ªåˆ—è¡¨ï¼šList list
â€‹		ç°åœ¨ä½¿ç”¨ **Collections** å¯¹å…¶è¿›è¡Œæ’åºï¼š

```java
public static void main(String[] args) {
    List<Integer> list = new ArrayList<>();
    list.add(3);
    list.add(10);
    list.add(2);
    list.add(5);
    Collections.sort(list, new Comparator<Integer>() {
        @Override
        public int compare(Integer o1, Integer o2) {
            return o1.compareTo(o2);//å‡åº
        }
    });
    System.out.println(list);
}
```

â€‹		å¦‚æœåˆ—è¡¨é‡Œæ˜¯ä¸ªMapï¼šList<Map<String,Object>> list
â€‹		ä¹Ÿå¯ä»¥ä½¿ç”¨ **Collections** å¯¹å…¶è¿›è¡Œæ’åºï¼š

```java
public static void main(String[] args) {
    List<Map<String,Object>> list=new ArrayList<>();
    Map<String,Object> map1=new HashMap<>();
    map1.put("name","name1");
    map1.put("age",2);
    Map<String,Object> map2=new HashMap<>();
    map2.put("name","name2");
    map2.put("age",3);
    list.add(map1);
    list.add(map2);
    //æŒ‰ç…§mapä¸­totalå­—æ®µæ’åº
    Collections.sort(list,new Comparator<Map<String,Object>>(){
        public int compare(Map<String,Object> o1 ,Map<String,Object> o2){
            Integer num1=(Integer)o1.get("age");
            Integer num2=(Integer)o2.get("age");
            return num2.compareTo(num1);   //é™åº
            //return num1.compareTo(num2); //å‡åº
        }
    });
    System.out.println(list);
}
```



### 11.  AutoColse æ¥å£åšä»€ä¹ˆç”¨çš„

> â€‹    åœ¨JDK1.7çš„æ—¶å€™å°±æå‡ºäº†ä¸€ç§è‡ªåŠ¨å…³é—­èµ„æºçš„æƒ³æ³•ï¼Œæ‰€ä»¥AutoCloseableæ¥å£å°±è¯ç”Ÿäº†ï¼ŒæŸ¥çœ‹AutoCloseableæºç ä¼šå‘ç°ï¼Œæ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•close()



```java
package java.lang;

public interface AutoCloseable {
    void close() throws Exception;
}
```





### 12. ThreadLocal å®ç°åŸç† æ•°æ®ç»“æ„ ç”Ÿå‘½å‘¨æœŸ

> **å‚è€ƒæ–‡çŒ®ï¼š**https://baijiahao.baidu.com/s?id=1653790035315010634&wfr=spider&for=pc

### 13. volatile ä¿®é¥°ç¬¦çš„ä½œç”¨

> å‚è€ƒæ–‡çŒ®ï¼šhttps://zhuanlan.zhihu.com/p/138819184
>

### 14. Error å’Œ Exception åŒºåˆ«

### 15.[æ­£åˆ™è¡¨è¾¾å¼](file:///D:/Taimei/IdeaSpaceWorkTest/knowledge/t5/æ­£åˆ™_T5.md)

### 16. java å­—ç¬¦é›†å¦‚ä½•æŒ‡å®šï¼Œé»˜è®¤æ˜¯ä»€ä¹ˆå­—ç¬¦é›†



## 17.java ä¸­ NIOï¼ŒBIO åŒºåˆ«

> å‚è€ƒæ–‡çŒ®ï¼šhttps://blog.csdn.net/m0_38109046/article/details/89449305
>

## 18.jvm å†…å­˜åˆ†é…æ¨¡å‹ï¼ŒGC æ–¹å¼ï¼ŒGC ç®—æ³•



# Mybaits

### 1. #å’Œ\$çš„åŒºåˆ«

[https://blog.csdn.net/siwuxie095/article/details/79190856](https://blog.csdn.net/siwuxie095/article/details/79190856)

æœ€å¤§çš„åŒºåˆ«æ˜¯#èƒ½é˜²æ­¢SQLæ³¨å…¥ï¼Œè€Œ$ä¸èƒ½é˜²æ­¢SQLæ³¨å…¥

> ï¼ˆ1ï¼‰ä¸è®ºæ˜¯å•ä¸ªå‚æ•°ï¼Œè¿˜æ˜¯å¤šä¸ªå‚æ•°ï¼Œä¸€å¾‹éƒ½å»ºè®®ä½¿ç”¨æ³¨è§£@Param("")
>
> ï¼ˆ2ï¼‰èƒ½ç”¨ #{} çš„åœ°æ–¹å°±ç”¨ #{}ï¼Œä¸ç”¨æˆ–å°‘ç”¨ ${}
>
> ï¼ˆ3ï¼‰è¡¨åä½œå‚æ•°æ—¶ï¼Œå¿…é¡»ç”¨ ${}ã€‚å¦‚ï¼šselect * from ${tableName}
>
> ï¼ˆ4ï¼‰order by æ—¶ï¼Œå¿…é¡»ç”¨ ${}ã€‚å¦‚ï¼šselect * from t_user order by ${columnName}
>
> ï¼ˆ5ï¼‰ä½¿ç”¨ ${} æ—¶ï¼Œè¦æ³¨æ„ä½•æ—¶åŠ æˆ–ä¸åŠ å•å¼•å·ï¼Œå³ ${} å’Œ '${}'

ä¸ºä»€ä¹ˆå¯ä»¥é˜²æ­¢SQLæ³¨å…¥

> {}åœ¨mybatisä¸­çš„åº•å±‚æ˜¯è¿ç”¨äº†PreparedStatement é¢„ç¼–è¯‘ï¼Œä¼ å…¥çš„å‚æ•°ä¼šä»¥ ? å½¢å¼æ˜¾ç¤ºï¼Œå› ä¸ºsqlçš„è¾“å…¥åªæœ‰åœ¨sqlç¼–è¯‘çš„æ—¶å€™èµ·ä½œç”¨ï¼Œå½“sqlé¢„ç¼–è¯‘å®Œåï¼Œä¼ å…¥çš„å‚æ•°å°±ä»…ä»…æ˜¯å‚æ•°ï¼Œä¸ä¼šå‚ä¸sqlè¯­å¥çš„ç”Ÿæˆï¼Œè€Œ${}åˆ™æ²¡æœ‰ä½¿ç”¨é¢„ç¼–è¯‘ï¼Œä¼ å…¥çš„å‚æ•°ç›´æ¥å’Œsqlè¿›è¡Œæ‹¼æ¥ï¼Œç”±æ­¤ä¼šäº§ç”Ÿsqlæ³¨å…¥çš„æ¼æ´ã€‚



### 2. foreach å¦‚ä½•ç”¨

foreachå…ƒç´ çš„å±æ€§ä¸»è¦æœ‰itemï¼Œindexï¼Œcollectionï¼Œopenï¼Œseparatorï¼Œclose

> - **itemï¼š**é›†åˆä¸­å…ƒç´ è¿­ä»£æ—¶çš„åˆ«åï¼Œè¯¥å‚æ•°ä¸ºå¿…é€‰ã€‚
> - **index**ï¼šåœ¨listå’Œæ•°ç»„ä¸­,indexæ˜¯å…ƒç´ çš„åºå·ï¼Œåœ¨mapä¸­ï¼Œindexæ˜¯å…ƒç´ çš„keyï¼Œè¯¥å‚æ•°å¯é€‰
> - **open**ï¼šforeachä»£ç çš„å¼€å§‹ç¬¦å·ï¼Œä¸€èˆ¬æ˜¯(å’Œclose=")"åˆç”¨ã€‚å¸¸ç”¨åœ¨in(),values()æ—¶ã€‚è¯¥å‚æ•°å¯é€‰
> - **separator**ï¼šå…ƒç´ ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œä¾‹å¦‚åœ¨in()çš„æ—¶å€™ï¼Œseparator=","ä¼šè‡ªåŠ¨åœ¨å…ƒç´ ä¸­é—´ç”¨â€œ,â€œéš”å¼€ï¼Œé¿å…æ‰‹åŠ¨è¾“å…¥é€—å·å¯¼è‡´sqlé”™è¯¯ï¼Œå¦‚in(1,2,)è¿™æ ·ã€‚è¯¥å‚æ•°å¯é€‰ã€‚
> - **close:** foreachä»£ç çš„å…³é—­ç¬¦å·ï¼Œä¸€èˆ¬æ˜¯)å’Œopen="("åˆç”¨ã€‚å¸¸ç”¨åœ¨in(),values()æ—¶ã€‚è¯¥å‚æ•°å¯é€‰ã€‚
> - **collection:** è¦åšforeachçš„å¯¹è±¡ï¼Œä½œä¸ºå…¥å‚æ—¶ï¼ŒListå¯¹è±¡é»˜è®¤ç”¨"list"ä»£æ›¿ä½œä¸ºé”®ï¼Œæ•°ç»„å¯¹è±¡æœ‰"array"ä»£æ›¿ä½œä¸ºé”®ï¼ŒMapå¯¹è±¡æ²¡æœ‰é»˜è®¤çš„é”®ã€‚å½“ç„¶åœ¨ä½œä¸ºå…¥å‚æ—¶å¯ä»¥ä½¿ç”¨@Param("keyName")æ¥è®¾ç½®é”®ï¼Œè®¾ç½®keyNameåï¼Œlist,arrayå°†ä¼šå¤±æ•ˆã€‚ é™¤äº†å…¥å‚è¿™ç§æƒ…å†µå¤–ï¼Œè¿˜æœ‰ä¸€ç§ä½œä¸ºå‚æ•°å¯¹è±¡çš„æŸä¸ªå­—æ®µçš„æ—¶å€™ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœUseræœ‰å±æ€§List idsã€‚å…¥å‚æ˜¯Userå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªcollection = "ids".***å¦‚æœUseræœ‰å±æ€§Ids ids;å…¶ä¸­Idsæ˜¯ä¸ªå¯¹è±¡ï¼ŒIdsæœ‰ä¸ªå±æ€§List id;å…¥å‚æ˜¯Userå¯¹è±¡ï¼Œé‚£ä¹ˆcollection = "ids.id"

#### 2.1. Arrayçš„mapperå†™æ³•ï¼š

##### æ³¨ï¼šarrayçš„å†™æ³•ä¸­collectionä¸­çš„å€¼å¿…é¡»æ˜¯array,ä¸èƒ½å†™Arrayï¼Œä¼šæŠ¥é”™çš„ã€‚ä½†ä¼ å‚çš„å‘½åå¯ä»¥ä¸æ˜¯array

```java
List<User>selectUserArr(int []arr);
```

```java
List<User>userArray=userMapper.selectUserArr(arr);
```

```xml
<select id="selectUserArr" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    from user
    where id in
    <foreach collection="array" item="id" open="(" separator="," close=")">
        #{id}
    </foreach>
</select>
```



#### 2.2. List

##### æ³¨ï¼šlistå†™æ³•ä¸­collectionä¸­çš„å€¼å¿…é¡»æ˜¯list,ä¹Ÿä¸èƒ½æ˜¯List,ä½†ä¼ æ¥çš„å‚æ•°å‘½åå¯ä»¥ä¸ä¸€å®šæ˜¯list

```java
List<User>selectUserList(List list1);
```

```java
List<User>userList=userMapper.selectUserList(list1);
```

```xml
<select id="selectUserList" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    from user
    where id in
    <foreach collection="list" item="id" open="(" separator="," close=")">
        #{id}
    </foreach>
</select>
```



#### 2.3. map

##### æ³¨ï¼šmapå†™æ³•ä¸­çš„collectionä¸­å¡«çš„æ˜¯mapçš„keyå€¼ï¼Œä¸å¯¹åº”å°±ä¼šæŠ¥é”™

```
List<User>selectUserMap(Map map);
```

```
map.put("map1",map1);
List<User> userMap=userMapper.selectUserMap(map);
```

```xml
<select id="selectUserMap" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    from user
    where id in
    <foreach collection="map1" item="id" open="(" separator="," close=")">
        #{id}
    </foreach>
</select>
<!-- æ’å…¥æ•°æ®:è¿”å›è®°å½•ä¸»é”®idå€¼ --> 
<insert id="insert" useGeneratedKeys="true" keyProperty="id"  keyColumn="id"> 	
insert  into stu (name,age) values (#{name},#{age}) 
</insert>
```



### 3. å¦‚ä½•æ‰¹é‡ insertï¼Œå¦‚ä½•è¿”å› insert åçš„è‡ªå¢ Id

> åœ¨xmlä¸­å®šä¹‰useGeneratedKeysä¸ºtrue,è¿”å›ä¸»é”®idçš„å€¼,keyPropertyå’ŒkeyColumnåˆ†åˆ«ä»£è¡¨æ•°æ®åº“è®°å½•ä¸»é”®å­—æ®µå’Œjavaå¯¹è±¡æˆå‘˜å±æ€§å

```xml
<!-- æ’å…¥æ•°æ®:è¿”å›è®°å½•ä¸»é”®idå€¼ --> 
<insert id="insert" useGeneratedKeys="true" keyProperty="id"  keyColumn="id"> 	
insert  into stu (name,age) values (#{name},#{age}) 
</insert>
```



# Spring å®¶æ—

### 1. IOC æ¦‚å¿µ å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–

[https://blog.csdn.net/lwyyyyyy/article/details/107202146](https://blog.csdn.net/lwyyyyyy/article/details/107202146)

- åŸç†

> SpringIOCè§£å†³å¾ªç¯ä¾èµ–çš„æ€è·¯å°±æ˜¯ä¾é **ç¼“å­˜**ï¼ŒåŒæ—¶è¿˜å¾—å¼•å‡ºä¸ªæ¦‚å¿µå³**æ—©æœŸæš´éœ²å¼•ç”¨**ã€‚æˆ‘ä»¬çŸ¥é“åœ¨IOCå®¹å™¨é‡Œbeançš„åˆå§‹åŒ–çš„è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šåˆ›å»ºå®ä¾‹ã€å±æ€§æ³¨å…¥å®ä¾‹ã€å›è°ƒå®ä¾‹å®ç°çš„æ¥å£æ–¹æ³•ã€‚è§£å†³æ€è·¯å°±åœ¨è¿™ï¼šå½“æˆ‘ä»¬åˆ›å»ºå®ä¾‹ä¸å±æ€§æ³¨å…¥å®ä¾‹è¿™ä¿©ä¸ªæ­¥éª¤ä¹‹é—´çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¼•å…¥ç¼“å­˜ï¼Œå°†è¿™äº›å·²ç»åˆ›å»ºå¥½ä½†æ˜¯å¹¶æ²¡æœ‰æ³¨å…¥å±æ€§çš„å®ä¾‹æ”¾åˆ°ç¼“å­˜é‡Œï¼Œè€Œè¿™äº›æ”¾åœ¨ç¼“å­˜é‡Œä½†æ˜¯æ²¡æœ‰è¢«æ³¨å…¥å±æ€§çš„å®ä¾‹å¯¹è±¡ï¼Œå°±æ˜¯è§£å†³å¾ªç¯ä¾èµ–çš„æ–¹æ³•ï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼šAå¯¹è±¡çš„åˆ›å»ºéœ€è¦å¼•ç”¨åˆ°Bå¯¹è±¡ï¼Œè€ŒBå¯¹è±¡çš„åˆ›å»ºä¹Ÿéœ€è¦Aå¯¹è±¡ï¼Œè€Œæ­¤æ—¶å½“Bå¯¹è±¡åˆ›å»ºçš„æ—¶å€™ç›´æ¥ä»ç¼“å­˜é‡Œå¼•ç”¨Aå¯¹è±¡ï¼ˆè™½ç„¶ä¸æ˜¯å®Œå…¨ä½“Aå¯¹è±¡ï¼Œæ¯•ç«Ÿæ²¡æœ‰èµ‹å€¼å¤„ç†ï¼‰ï¼Œå½“Bå¯¹è±¡å®Œæˆåˆ›å»ºä»¥åå†è¢«Aå¯¹è±¡å¼•ç”¨è¿›å»ï¼Œåˆ™Aå¯¹è±¡ä¹Ÿå®Œæˆäº†åˆ›å»ºã€‚
> **è¿™å°±æ˜¯SpringIOCè§£å†³beanç›´æ¥å¾ªç¯ä¾èµ–çš„æ€è·¯**å½“ç„¶æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œ*IOCèƒ½å¤Ÿè§£å†³çš„åªèƒ½æ˜¯å±æ€§ä¹‹é—´çš„å¾ªç¯ä¾èµ–ï¼Œå¦‚æœæœ‰beanä¹‹é—´çš„æ„é€ å™¨ç›¸äº’ä¾èµ–åˆ™å°±è§£å†³ä¸äº†åªèƒ½æŠ¥é”™äº†ã€‚*



### 2. äº‹åŠ¡ä¼ æ’­æœºåˆ¶

#### 2.1 æ­»æ´»ä¸è¦äº‹åŠ¡

Propagation.NEVER

>  ä»¥éäº‹åŠ¡æ–¹å¼è¿›è¡Œï¼Œå¦‚æœå­˜åœ¨äº‹åŠ¡åˆ™æŠ›å‡ºå¼‚å¸¸

```java
@Transactional
public void laoda(String firstName,String toName,Integer money){
    accountDao.out(firstName,money);
    try {
        transactionalService.xiaodi(toName,money);
    }catch (Exception e){
        e.printStackTrace();
    }
    int x =10;
    if(x == 10){
        throw  new RuntimeException("å‡ºé”™äº†");
    }
}
//æ‰§è¡Œæ—¶æŠ¥é”™,å› ä¸ºlaoda()æ·»åŠ äº†äº‹åŠ¡ï¼Œè€Œxiaodi()æ˜¯Propagation.NEVER
//org.springframework.transaction.IllegalTransactionStateException: Existing transaction found for transaction marked with propagation 'never'
@Transactional(propagation = Propagation.NEVER) 
public void xiaodi(String toName,Integer money){
    accountDao.in(toName,money);
    int x =10;
    if(x == 10){
        throw  new RuntimeException("å‡ºé”™äº†");
    }
}
```

Propagation.NOT_SUPPORTED

> ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡åˆ™å°†å½“å‰äº‹åŠ¡æŒ‚èµ·

```java
// å› ä¸ºå½“å‰äº‹åŠ¡è¢«æŒ‚èµ·ï¼Œå¯¼è‡´accountè¡¨é”æ­»ï¼Œxiaodi()ä¹Ÿæ˜¯æ“ä½œçš„accoutï¼Œæ‰€ä»¥é€ æˆæ­»é”ï¼Œæˆ‘ä»¬è¿™é‡Œå‡è®¾å®ƒæ²¡æœ‰æ­»é”ï¼Œlaoda()æœ‰äº‹åŠ¡å›æ»šï¼Œxiaodi()ï¼Œæ²¡æœ‰äº‹åŠ¡ä¸å›æ»š
@Transactional(propagation = Propagation.REQUIRED)
public void laoda(String firstName,String toName,Integer money){
    accountDao.out(firstName,money);
    try {
        transactionalService.xiaodi(toName,money);
    }catch (Exception e){
        e.printStackTrace();
    }
    int x =10;
    if(x == 10){
        throw  new RuntimeException("å‡ºé”™äº†");
    }
}

@Transactional(propagation = Propagation.NOT_SUPPORTED)
public void xiaodi(String toName,Integer money){
    accountDao.in(toName,money); //è™½ç„¶æŠ¥é”™ï¼Œä½†æ˜¯æ˜¯ä»¥éäº‹åŠ¡å½¢å¼æ‰§è¡Œï¼Œæ‰€ä»¥æ•°æ®ä¸ä¼šå›æ»š
    int x =10;
    if(x == 10){
        throw  new RuntimeException("å‡ºé”™äº†");
    }
}
```



#### 2.2 å¯æœ‰å¯æ— çš„

Propagation.SUPPORTS

> æ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰äº‹åŠ¡çš„è¯ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œ

```java
@Transactional
public void laoda(String firstName,String toName,Integer money){
    accountDao.out(firstName,money);
    try {
        transactionalService.xiaodi(toName,money);
    }catch (Exception e){
        e.printStackTrace();
    }
    int x =10;
    if(x == 10){
        throw  new RuntimeException("å‡ºé”™äº†");
    }
}
// å› ä¸ºlaoda()æœ‰äº‹åŠ¡ï¼Œæ‰€ä»¥xiaodi()ä¹Ÿä¼šä½¿ç”¨åŒæ ·çš„äº‹åŠ¡ï¼Œå¦‚æœlaoda()æ²¡æœ‰äº‹åŠ¡ï¼Œxiaodi()ä¹Ÿæ²¡æœ‰äº‹åŠ¡
@Transactional(propagation = Propagation.SUPPORTS)
public void xiaodi(String toName,Integer money){
    accountDao.in(toName,money);
    int x =10;
    if(x == 10){
        throw  new RuntimeException("å‡ºé”™äº†");
    }
}
```



#### 2.3 å¿…é¡»è¦æœ‰çš„

Propagation.REQUIRES_NEW

> æœ‰æ²¡æœ‰éƒ½æ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœåŸæ¥æœ‰äº‹åŠ¡ï¼Œå°±å°†åŸæ¥çš„æŒ‚èµ·

```java
@Transactional
public void laoda(String firstName,String toName,Integer money){
    accountDao.out(firstName,money);
    try {
        transactionalService.xiaodi(toName,money);
    }catch (Exception e){
        e.printStackTrace();
    }
    int x =10;
    if(x == 10){
        throw  new RuntimeException("å‡ºé”™äº†");
    }
}
// laoda()çš„äº‹åŠ¡å’Œxiaodi()çš„äº‹åŠ¡äº’ä¸å½±å“ï¼Œå› ä¸ºlaoda()çš„äº‹åŠ¡è¢«æŒ‚èµ·äº†
@Transactional(propagation = Propagation.REQUIRES_NEW)
public void xiaodi(String toName,Integer money){
    accountDao.in(toName,money);
    int x =10;
    if(x == 10){
        throw  new RuntimeException("å‡ºé”™äº†");
    }
}
```



Propagation.NESTED

>  å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™è¿›è¡Œä¸PROPAGATION_REQUIREDç±»ä¼¼çš„æ“ä½œ
>
> laoda()å‡ºç°å¼‚å¸¸å›æ»šï¼Œxiaodi()ä¹Ÿä¼šå›æ»šï¼›xiaodi()å‡ºç°å¼‚å¸¸å›æ»šï¼Œlaoda()ä¸ä¼šå›æ»šï¼›å›ºçˆ¶ä¼šå½±å“å­ï¼Œå­çš„äº‹åŠ¡ä¸ä¼šå½±å“çˆ¶



Propagation.REQUIRED

> å¦‚æœæ²¡æœ‰ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœæœ‰ï¼Œå°±åŠ å…¥å½“å‰äº‹åŠ¡



### 3. @Autowrie @Resource çš„åŒºåˆ«

- `@Resource`å’Œ`@Autowired`éƒ½å¯ä»¥ç”¨æ¥è£…é…beanï¼Œéƒ½å¯ä»¥ç”¨äºå­—æ®µæˆ–setteræ–¹æ³•ã€‚
- `@Autowired`é»˜è®¤**æŒ‰ç±»å‹**è£…é…ï¼Œé»˜è®¤æƒ…å†µä¸‹å¿…é¡»è¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœè¦å…è®¸nullå€¼ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„requiredå±æ€§ä¸ºfalseã€‚
- `@Resource`é»˜è®¤**æŒ‰åç§°**è£…é…ï¼Œå½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ—¶æ‰æŒ‰ç…§ç±»å‹è¿›è¡Œè£…é…ã€‚åç§°å¯ä»¥é€šè¿‡nameå±æ€§æŒ‡å®šï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šnameå±æ€§ï¼Œå½“æ³¨è§£å†™åœ¨å­—æ®µä¸Šæ—¶ï¼Œé»˜è®¤å–å­—æ®µåï¼Œå½“æ³¨è§£å†™åœ¨setteræ–¹æ³•ä¸Šæ—¶ï¼Œé»˜è®¤å–å±æ€§åè¿›è¡Œè£…é…ã€‚



### 4. @Qualifier çš„ä½œç”¨

> ç®€å•çš„ç†è§£å°±æ˜¯ï¼š
> ï¼ˆ1ï¼‰åœ¨ä½¿ç”¨@Autowireè‡ªåŠ¨æ³¨å…¥çš„æ—¶å€™ï¼ŒåŠ ä¸Š@Qualifier(â€œexampleâ€)å¯ä»¥æŒ‡å®šæ³¨å…¥å“ªä¸ªå¯¹è±¡ï¼›
> ï¼ˆ2ï¼‰å¯ä»¥ä½œä¸ºç­›é€‰çš„é™å®šç¬¦ï¼Œæˆ‘ä»¬åœ¨åšè‡ªå®šä¹‰æ³¨è§£æ—¶å¯ä»¥åœ¨å…¶å®šä¹‰ä¸Šå¢åŠ @Qualifierï¼Œç”¨æ¥ç­›é€‰éœ€è¦çš„å¯¹è±¡ã€‚è¿™ä¸ªç†è§£çœ‹ä¸‹é¢çš„ä»£ç å§ï¼Œä¸å¥½è§£é‡Šã€‚

```java
// @Autowireå’Œ@Qualifieré…åˆä½¿ç”¨æ•ˆæœå’Œ@Resourceä¸€æ ·
@Autowired(required = false) @Qualifier("example") 
private Example example;

@Resource(name = "example") 
private Example example;
```



### 5. spring åŠ¨æ€ä»£ç†æœ‰å‡ ç§æ–¹å¼ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«

> **å‚è€ƒæ–‡çŒ®ï¼š**https://blog.csdn.net/qq_40694145/article/details/107005166

#### 5.1spring åŠ¨æ€ä»£ç†æœ‰å‡ ç§æ–¹å¼

â€‹	JDKåŠ¨æ€ä»£ç†,åŸºäºæ¥å£(é»˜è®¤ä»£ç†æ¨¡å¼)ï¼ŒCGLIBåŠ¨æ€ä»£ç†ï¼ˆè‹¥è¦ä½¿ç”¨éœ€è¦è¿›è¡Œé…ç½®ï¼‰



# å¹¶å‘

## **1.1 javaå„ç§é”çš„ä»‹ç»**

> **å‚è€ƒæ–‡çŒ®ï¼š**[**https://www.cnblogs.com/jyroy/p/11365935.html**](https://www.cnblogs.com/jyroy/p/11365935.html)



## **1.2 synchronizedä¸Lockçš„åŒºåˆ«**

> **å‚è€ƒæ–‡çŒ®ï¼š**[**https://www.cnblogs.com/iyyy/p/7993788.html**](https://www.cnblogs.com/iyyy/p/7993788.html)



## 1.3 çº¿ç¨‹ä¹‹é—´æ˜¯å¦‚ä½•é€šä¿¡çš„

> **å‚è€ƒæ–‡çŒ®ï¼š**https://blog.csdn.net/jsjsjs1789/article/details/104044510

javaçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ–¹å¼æ€»å…±æœ‰ 8 ç§ï¼Œåˆ†åˆ«æ˜¯
`volatileã€synchronizedã€interruptã€waitã€notifyã€notifyAllã€joinã€ç®¡é“è¾“å…¥/è¾“å‡º`ï¼Œ

### 1.3.1 é€šè¿‡ join

æŠŠæŒ‡å®šçš„çº¿ç¨‹åŠ å…¥åˆ°å½“å‰çº¿ç¨‹ï¼Œå¯ä»¥å°†ä¸¤ä¸ªäº¤æ›¿æ‰§è¡Œçš„çº¿ç¨‹åˆå¹¶ä¸ºé¡ºåºæ‰§è¡Œã€‚

æ¯”å¦‚åœ¨çº¿ç¨‹Bä¸­è°ƒç”¨äº†çº¿ç¨‹Açš„Join()æ–¹æ³•ï¼Œç›´åˆ°çº¿ç¨‹Aæ‰§è¡Œå®Œæ¯•åï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œçº¿ç¨‹Bã€‚

```java
public static void main(String[] args) {
    Thread a = new Thread(() -> {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println(new Date() +":è¿™æ˜¯t1");
    });

    Thread b = new Thread(() -> {
        try {
            // açº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œå†æ‰§è¡Œçº¿ç¨‹b
            a.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println(new Date() +":è¿™æ˜¯t2");
    });

    a.start();
    b.start();
}
```



### 1.3.2 waitã€notifyã€notifyAll

> **å‚è€ƒæ–‡çŒ®ï¼š**https://www.cnblogs.com/moongeek/p/7631447.html

> 1.notify åªèƒ½éšæœºå”¤é†’ä¸€ä¸ª WaitSet ä¸­çš„çº¿ç¨‹ï¼Œè¿™æ—¶å¦‚æœæœ‰å…¶å®ƒçº¿ç¨‹ä¹Ÿåœ¨ç­‰å¾…ï¼Œé‚£ä¹ˆå°±å¯èƒ½å”¤é†’ä¸äº†æ­£ç¡®çš„çº¿ç¨‹ï¼Œç§°ä¹‹ä¸ºã€è™šå‡å”¤é†’ã€‘
>
> è§£å†³æ–¹æ³•ï¼Œæ”¹ä¸º notifyAll
>
> 2.**sleep(long n)** **å’Œ** **wait(long n)** **çš„åŒºåˆ«**
>
> â€‹    1) sleep æ˜¯ Thread æ–¹æ³•ï¼Œè€Œ wait æ˜¯ Object çš„æ–¹æ³• 
>
> â€‹    2) sleep ä¸éœ€è¦å¼ºåˆ¶å’Œ synchronized é…åˆä½¿ç”¨ï¼Œä½† wait éœ€è¦å’Œ synchronized ä¸€èµ·ç”¨ 
>
>    3) sleep åœ¨ç¡çœ çš„åŒæ—¶ï¼Œä¸ä¼šé‡Šæ”¾å¯¹è±¡é”çš„ï¼Œä½† wait åœ¨ç­‰å¾…çš„æ—¶å€™ä¼šé‡Šæ”¾å¯¹è±¡é” 
>
>    4) å®ƒä»¬çŠ¶æ€ TIMED_WAITING



### 1.3.3 interrupt

> - interrupt()ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹çš„interrupt()æ–¹æ³•ï¼Œå³ä¼šå‘é‚£ä¸ªçº¿ç¨‹å‘å‡ºä¿¡å·â€”â€”çº¿ç¨‹ä¸­æ–­çŠ¶æ€å·²è¢«è®¾ç½®ã€‚è‡³äºé‚£ä¸ªçº¿ç¨‹ä½•å»ä½•ä»ï¼Œç”±å…·ä½“çš„ä»£ç å®ç°å†³å®šã€‚
> - isInterrupted()ï¼Œç”¨æ¥åˆ¤æ–­å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€(true or false)ã€‚
> - interrupted()æ˜¯ä¸ªThreadçš„staticæ–¹æ³•ï¼Œç”¨æ¥æ¢å¤ä¸­æ–­çŠ¶æ€ï¼Œåå­—èµ·å¾—é¢ğŸ™„ã€‚

```java
 public static void main(String[] args) throws InterruptedException {
        Thread t2 = new Thread(()->{
            while(true) {
                boolean interrupted = Thread.currentThread().isInterrupted();
                // æ ¹æ®æ‰“æ–­çŠ¶æ€æ¥å†³å®šæ˜¯å¦ä¸­å•è¯¥çº¿ç¨‹
                if(interrupted) {
                    System.out.println(" æ‰“æ–­çŠ¶æ€: "+interrupted);
                /*    //å¯ä»¥æ¢å¤ä¸­æ–­çŠ¶æ€,æ¢å¤åä»ç„¶å¯ä»¥ç»§ç»­æ‰“å° å¼€å¿ƒ
                    Thread.currentThread().interrupted();*/
                    break;
                }
                System.out.println("å¼€å¿ƒ");
            }
        }, "t2");
        t2.start();
        Thread.sleep(2000);
        t2.interrupt();
 }
```



### 1.4 æ­»é”çš„äº§ç”Ÿä¸è§£å†³

> **å‚è€ƒæ–‡çŒ®ï¼š**https://www.cnblogs.com/JimmyFanHome/p/9914562.html





# æ•°æ®ç»“æ„

## 1.é˜Ÿåˆ—

> **å‚è€ƒæ–‡çŒ®ï¼š**https://www.cnblogs.com/TimVerion/p/11194552.html

> **é˜Ÿåˆ—ï¼ˆqueueï¼‰æ˜¯åªå…è®¸åœ¨ä¸€ç«¯è¿›è¡Œæ’å…¥æ“ä½œï¼Œè€Œåœ¨å¦ä¸€ç«¯è¿›è¡Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ã€‚**
>
> **é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºï¼ˆFirst in First Outï¼‰çš„çº¿æ€§è¡¨ï¼Œç®€ç§°FIFOã€‚å…è®¸æ’å…¥çš„ä¸€ç«¯ç§°ä¸ºé˜Ÿå°¾ï¼Œå…è®¸åˆ é™¤çš„ä¸€ç«¯ç§°ä¸ºé˜Ÿå¤´**



## 2.æ ˆ

> æ ˆæ˜¯ä¸€ç§åªèƒ½ä»è¡¨çš„ä¸€ç«¯å­˜å–æ•°æ®ä¸”éµå¾ª "å…ˆè¿›åå‡º" åŸåˆ™çš„çº¿æ€§å­˜å‚¨ç»“æ„ã€‚



## 3.é“¾è¡¨å’Œæ•°ç»„

> **å‚è€ƒæ–‡çŒ®ï¼š** https://blog.csdn.net/weibo1230123/article/details/82011889



## 4.æ ‘

### 4.1 äºŒå‰æ ‘

> **å·¦èŠ‚ç‚¹æ¯”æ ¹èŠ‚ç‚¹å°ï¼Œå³èŠ‚ç‚¹æ¯”æ ¹èŠ‚ç‚¹å¤§(è¿™æ ·æœ‰ä¸ªåå¤„å°±æ˜¯é¡ºåºæ’å…¥æ—¶ï¼Œå¯èƒ½å˜æˆé“¾è¡¨çš„å½¢å¼)**

![æ•°æ®ç»“æ„-1](\picture\æ•°æ®ç»“æ„-äºŒå‰æ ‘1.gif)



![æ•°æ®ç»“æ„-2](\picture\æ•°æ®ç»“æ„-äºŒå‰æ ‘2.gif)



### 4.2 å¹³è¡¡æ ‘

> å¹³è¡¡æ ‘ï¼ˆBalance Treeï¼ŒBTï¼‰æŒ‡çš„æ˜¯ï¼Œä»»æ„èŠ‚ç‚¹çš„å­æ ‘çš„é«˜åº¦å·®éƒ½å°äºç­‰äº 1ã€‚
>
> å¸¸è§çš„ç¬¦åˆå¹³è¡¡æ ‘çš„æœ‰ AVL æ ‘ï¼ˆäºŒå‰å¹³è¡¡æœç´¢æ ‘ï¼‰ï¼ŒB æ ‘ï¼ˆå¤šè·¯å¹³è¡¡æœç´¢æ ‘ï¼Œ2-3 æ ‘ï¼Œ2-3-4 æ ‘ä¸­çš„ä¸€ç§ï¼‰ï¼Œçº¢é»‘æ ‘ç­‰ã€‚



#### 4.2.1 AVL æ ‘

> æ˜¯æŒ‡ä»»æ„èŠ‚ç‚¹çš„ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡ 1 çš„å¹³è¡¡æ ‘ã€‚åˆç§°è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚
>
> **é˜²æ­¢äº†äºŒå‰æ ‘å½¢æˆé“¾è¡¨çš„å¼Šç«¯ï¼Œä¸ºäº†ä¿è¯å¹³è¡¡ï¼ˆæœ€çŸ­æ”¯æ ‘å’Œæœ€é•¿æ”¯æ•°æœ€é•¿ä¸èƒ½è¶…è¿‡1ï¼Œä¼šè‡ªåŠ¨çš„æ—‹è½¬ï¼Œæé«˜äº†æ€§èƒ½ï¼Œä½†æ˜¯é™ä½äº†æ’å…¥æ€§èƒ½ï¼‰**

![æ•°æ®ç»“æ„-3](\picture\æ•°æ®ç»“æ„-AVLæ ‘.gif)



#### 4.2.2 çº¢é»‘æ ‘

> **é˜²æ­¢äº†AVLæ ‘çš„æ’å…¥æ€§èƒ½é™ä½é—®é¢˜(æœ€çŸ­æ”¯æ ‘å’Œæœ€é•¿æ”¯æ•°æœ€é•¿ä¸èƒ½è¶…è¿‡2å€ï¼Œåœ¨æŸ¥è¯¢å’Œæ’å…¥ä¹‹é—´å¯»æ‰¾äº†ä¸ªå¹³è¡¡)**
>
> æ€§è´¨1ï¼šæ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯é»‘è‰²ï¼Œè¦ä¹ˆæ˜¯çº¢è‰²ã€‚
>
> æ€§è´¨2ï¼šæ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚
>
> æ€§è´¨3ï¼šæ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ã€‚
>
> æ€§è´¨4ï¼šæ¯ä¸ªçº¢è‰²ç»“ç‚¹çš„ä¸¤ä¸ªå­ç»“ç‚¹ä¸€å®šéƒ½æ˜¯é»‘è‰²ã€‚
>
> **æ€§è´¨5ï¼šä»»æ„ä¸€ç»“ç‚¹åˆ°æ¯ä¸ªå¶å­ç»“ç‚¹çš„è·¯å¾„éƒ½åŒ…å«æ•°é‡ç›¸åŒçš„é»‘ç»“ç‚¹ã€‚**

![çº¢é»‘æ ‘](picture\æ•°æ®ç»“æ„-çº¢é»‘æ ‘.png)

#### 4.2.3 Bæ ‘

> å‚è€ƒæ–‡çŒ®ï¼šhttp://www.liuzk.com/410.html
>
> B æ ‘ç›¸å¯¹äºå¹³è¡¡äºŒå‰æ ‘ï¼ŒInnoDB ä¸­é¡µçš„é»˜è®¤å¤§å°æ˜¯ 16KB,æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨äº†æ›´å¤šçš„é”®å€¼ï¼ˆkeyï¼‰å’Œæ•°æ®ï¼ˆdataï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹æ‹¥æœ‰æ›´å¤šçš„å­èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹çš„ä¸ªæ•°ä¸€èˆ¬ç§°ä¸ºé˜¶ï¼Œä¸Šè¿°å›¾ä¸­çš„ B æ ‘ä¸º 3 é˜¶ B æ ‘ï¼Œé«˜åº¦ä¹Ÿä¼šå¾ˆä½

åŸºäºè¿™ä¸ªç‰¹æ€§ï¼ŒB æ ‘æŸ¥æ‰¾æ•°æ®è¯»å–ç£ç›˜çš„æ¬¡æ•°å°†ä¼šå¾ˆå°‘ï¼Œæ•°æ®çš„æŸ¥æ‰¾æ•ˆç‡ä¹Ÿä¼šæ¯”å¹³è¡¡äºŒå‰æ ‘é«˜å¾ˆå¤šã€‚

å‡å¦‚æˆ‘ä»¬è¦æŸ¥æ‰¾ id=28 çš„ç”¨æˆ·ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ä¸Šå›¾ B æ ‘ä¸­æŸ¥æ‰¾çš„æµç¨‹å¦‚ä¸‹ï¼š

- å…ˆæ‰¾åˆ°æ ¹èŠ‚ç‚¹ä¹Ÿå°±æ˜¯é¡µ 1ï¼Œåˆ¤æ–­ 28 åœ¨é”®å€¼ 17 å’Œ 35 ä¹‹é—´ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ ¹æ®é¡µ 1 ä¸­çš„æŒ‡é’ˆ p2 æ‰¾åˆ°é¡µ 3ã€‚
- å°† 28 å’Œé¡µ 3 ä¸­çš„é”®å€¼ç›¸æ¯”è¾ƒï¼Œ28 åœ¨ 26 å’Œ 30 ä¹‹é—´ï¼Œæˆ‘ä»¬æ ¹æ®é¡µ 3 ä¸­çš„æŒ‡é’ˆ p2 æ‰¾åˆ°é¡µ 8ã€‚
- å°† 28 å’Œé¡µ 8 ä¸­çš„é”®å€¼ç›¸æ¯”è¾ƒï¼Œå‘ç°æœ‰åŒ¹é…çš„é”®å€¼ 28ï¼Œé”®å€¼ 28 å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯ä¸ºï¼ˆ28ï¼Œbvï¼‰ã€‚

![Bæ ‘](picture\æ•°æ®ç»“æ„-Bæ ‘.png)

#### 4.2.4 B+æ ‘

> å‚è€ƒæ–‡çŒ®ï¼šhttp://www.liuzk.com/410.html
>
> â‘ B+ æ ‘éå¶å­èŠ‚ç‚¹ä¸Šæ˜¯ä¸å­˜å‚¨æ•°æ®çš„ï¼Œä»…å­˜å‚¨é”®å€¼ï¼Œè€Œ B æ ‘èŠ‚ç‚¹ä¸­ä¸ä»…å­˜å‚¨é”®å€¼ï¼Œä¹Ÿä¼šå­˜å‚¨æ•°æ®,ä¹‹æ‰€ä»¥è¿™ä¹ˆåšæ˜¯å› ä¸ºåœ¨æ•°æ®åº“ä¸­é¡µçš„å¤§å°æ˜¯å›ºå®šçš„ï¼ŒInnoDB ä¸­é¡µçš„é»˜è®¤å¤§å°æ˜¯ 16KBã€‚å¦‚æœä¸å­˜å‚¨æ•°æ®ï¼Œé‚£ä¹ˆå°±ä¼šå­˜å‚¨æ›´å¤šçš„é”®å€¼ï¼Œç›¸åº”çš„æ ‘çš„é˜¶æ•°ï¼ˆèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ ‘ï¼‰å°±ä¼šæ›´å¤§ï¼Œæ ‘å°±ä¼šæ›´çŸ®æ›´èƒ–ï¼Œå¦‚æ­¤ä¸€æ¥æˆ‘ä»¬æŸ¥æ‰¾æ•°æ®è¿›è¡Œç£ç›˜çš„ IO æ¬¡æ•°åˆä¼šå†æ¬¡å‡å°‘ï¼Œæ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ä¹Ÿä¼šæ›´å¿«ã€‚
>
> â‘¡å› ä¸º B+ æ ‘ç´¢å¼•çš„æ‰€æœ‰æ•°æ®å‡å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼Œè€Œä¸”æ•°æ®æ˜¯æŒ‰ç…§é¡ºåºæ’åˆ—çš„ã€‚

![æ•°æ®ç»“æ„-B+æ ‘](picture\æ•°æ®ç»“æ„-B+æ ‘.png)





# æ•°æ®åº“

## 1.äº‹åŠ¡éš”ç¦»çº§åˆ«

#### 1.1 **Read Uncommittedï¼ˆè„è¯»ï¼‰**

â€‹	åœ¨è¯¥éš”ç¦»çº§åˆ«ï¼Œæ‰€æœ‰äº‹åŠ¡éƒ½å¯ä»¥çœ‹åˆ°å…¶ä»–æœªæäº¤äº‹åŠ¡çš„æ‰§è¡Œç»“æœã€‚æœ¬éš”ç¦»çº§åˆ«å¾ˆå°‘ç”¨äºå®é™…åº”ç”¨ï¼Œå› ä¸ºå®ƒçš„æ€§èƒ½ä¹Ÿä¸æ¯”å…¶ä»–çº§åˆ«å¥½å¤šå°‘ã€‚è¯»å–æœªæäº¤çš„æ•°æ®ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸ºè„è¯»ï¼ˆDirty Readï¼‰ã€‚

#### 1.2 **Read Committedï¼ˆä¸å¯é‡å¤è¯»ï¼‰**

â€‹	è¿™æ˜¯å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿçš„é»˜è®¤éš”ç¦»çº§åˆ«ï¼ˆä½†ä¸æ˜¯MySQLé»˜è®¤çš„ï¼‰ã€‚å®ƒæ»¡è¶³äº†éš”ç¦»çš„ç®€å•å®šä¹‰ï¼šä¸€ä¸ªäº‹åŠ¡åªèƒ½çœ‹è§å·²ç»æäº¤äº‹åŠ¡æ‰€åšçš„æ”¹å˜ã€‚è¿™ç§éš”ç¦»çº§åˆ« ä¹Ÿæ”¯æŒæ‰€è°“çš„ä¸å¯é‡å¤è¯»ï¼ˆNonrepeatable Readï¼‰ï¼Œå› ä¸ºåŒä¸€äº‹åŠ¡çš„å…¶ä»–å®ä¾‹åœ¨è¯¥å®ä¾‹å¤„ç†å…¶é—´å¯èƒ½ä¼šæœ‰æ–°çš„commitï¼Œæ‰€ä»¥åŒä¸€selectå¯èƒ½è¿”å›ä¸åŒç»“æœã€‚

#### 1.3  **Repeatable Readï¼ˆå¯é‡å¤è¯»ï¼‰**

â€‹	è¿™æ˜¯MySQLçš„é»˜è®¤äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå®ƒç¡®ä¿åŒä¸€äº‹åŠ¡çš„å¤šä¸ªå®ä¾‹åœ¨å¹¶å‘è¯»å–æ•°æ®æ—¶ï¼Œä¼šçœ‹åˆ°åŒæ ·çš„æ•°æ®è¡Œã€‚ä¸è¿‡ç†è®ºä¸Šï¼Œè¿™ä¼šå¯¼è‡´å¦ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼šå¹»è¯» ï¼ˆPhantom Readï¼‰ã€‚ç®€å•çš„è¯´ï¼Œå¹»è¯»æŒ‡å½“ç”¨æˆ·è¯»å–æŸä¸€èŒƒå›´çš„æ•°æ®è¡Œæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡åˆåœ¨è¯¥èŒƒå›´å†…æ’å…¥äº†æ–°è¡Œï¼Œå½“ç”¨æˆ·å†è¯»å–è¯¥èŒƒå›´çš„æ•°æ®è¡Œæ—¶ï¼Œä¼šå‘ç°æœ‰æ–°çš„â€œå¹»å½±â€ è¡Œã€‚InnoDBå’ŒFalconå­˜å‚¨å¼•æ“é€šè¿‡å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼ŒMultiversion Concurrency Controlï¼‰æœºåˆ¶è§£å†³äº†è¯¥é—®é¢˜ã€‚

#### 1.4 **Serializableï¼ˆå¯ä¸²è¡ŒåŒ–ï¼‰**

â€‹	è¿™æ˜¯æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®ƒé€šè¿‡å¼ºåˆ¶äº‹åŠ¡æ’åºï¼Œä½¿ä¹‹ä¸å¯èƒ½ç›¸äº’å†²çªï¼Œä»è€Œè§£å†³å¹»è¯»é—®é¢˜ã€‚ç®€è¨€ä¹‹ï¼Œå®ƒæ˜¯åœ¨æ¯ä¸ªè¯»çš„æ•°æ®è¡Œä¸ŠåŠ ä¸Šå…±äº«é”ã€‚åœ¨è¿™ä¸ªçº§åˆ«ï¼Œå¯èƒ½å¯¼è‡´å¤§é‡çš„è¶…æ—¶ç°è±¡å’Œé”ç«äº‰ã€‚ 



## 2.äº‹åŠ¡çš„ ACID ç‰¹æ€§

1 ã€åŸå­æ€§ã€‚äº‹åŠ¡æ˜¯æ•°æ®åº“çš„é€»è¾‘å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­åŒ…å«çš„å„æ“ä½œè¦ä¹ˆéƒ½åšï¼Œè¦ä¹ˆéƒ½ä¸åš

2 ã€ä¸€è‡´æ€§ã€‚äº‹ åŠ¡æ‰§è¡Œçš„ç»“æœå¿…é¡»æ˜¯ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚å› æ­¤å½“æ•°æ®åº“åªåŒ…å«æˆåŠŸäº‹åŠ¡æäº¤çš„ç»“æœæ—¶ï¼Œå°±è¯´æ•°æ®åº“å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚å¦‚æœæ•°æ®åº“ç³»ç»Ÿ è¿è¡Œä¸­å‘ç”Ÿæ•…éšœï¼Œæœ‰äº›äº‹åŠ¡å°šæœªå®Œæˆå°±è¢«è¿«ä¸­æ–­ï¼Œè¿™äº›æœªå®Œæˆäº‹åŠ¡å¯¹æ•°æ®åº“æ‰€åšçš„ä¿®æ”¹æœ‰ä¸€éƒ¨åˆ†å·²å†™å…¥ç‰©ç†æ•°æ®åº“ï¼Œè¿™æ—¶æ•°æ®åº“å°±å¤„äºä¸€ç§ä¸æ­£ç¡®çš„çŠ¶æ€ï¼Œæˆ–è€…è¯´æ˜¯ ä¸ä¸€è‡´çš„çŠ¶æ€ã€‚

3 ã€éš”ç¦»æ€§ã€‚ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½å…¶å®ƒäº‹åŠ¡å¹²æ‰°ã€‚å³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹å…¶å®ƒå¹¶å‘äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚

4 ã€æŒç»­æ€§ã€‚ä¹Ÿç§°æ°¸ä¹…æ€§ï¼ŒæŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ã€‚æ¥ä¸‹æ¥çš„å…¶å®ƒæ“ä½œæˆ–æ•…éšœä¸åº”è¯¥å¯¹å…¶æ‰§è¡Œç»“æœæœ‰ä»»ä½•å½±å“ã€‚



## 3.åˆ†åº“åˆ†è¡¨çš„åŸç†ä¸å®ç°æ–¹å¼

#### 3.1 æ°´å¹³åˆ†åº“

![æ•°æ®åº“-æ°´å¹³åˆ†åº“](picture\æ•°æ®åº“-æ°´å¹³åˆ†åº“.png)

**æ¦‚å¿µï¼š**

ä»¥**å­—æ®µ**ä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸€å®šç­–ç•¥ï¼ˆhashã€rangeç­‰ï¼‰ï¼Œå°†ä¸€ä¸ª**åº“**ä¸­çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ª**åº“**ä¸­ã€‚

**ç»“æœï¼š**

- æ¯ä¸ª**åº“**çš„**ç»“æ„**éƒ½ä¸€æ ·ï¼›
- æ¯ä¸ª**åº“**çš„**æ•°æ®**éƒ½ä¸ä¸€æ ·ï¼Œæ²¡æœ‰äº¤é›†ï¼›
- æ‰€æœ‰**åº“**çš„**å¹¶é›†**æ˜¯å…¨é‡æ•°æ®ï¼›

**åœºæ™¯ï¼š**

ç³»ç»Ÿç»å¯¹å¹¶å‘é‡ä¸Šæ¥äº†ï¼Œåˆ†è¡¨éš¾ä»¥æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰æ˜æ˜¾çš„ä¸šåŠ¡å½’å±æ¥å‚ç›´åˆ†åº“ã€‚

**åˆ†æï¼š**

åº“å¤šäº†ï¼Œioå’Œcpuçš„å‹åŠ›è‡ªç„¶å¯ä»¥æˆå€ç¼“è§£ã€‚



#### 3.2 æ°´å¹³åˆ†è¡¨

![æ•°æ®åº“-æ°´å¹³åˆ†è¡¨](picture\æ•°æ®åº“-æ°´å¹³åˆ†è¡¨.png)

**æ¦‚å¿µï¼š**

ä»¥**å­—æ®µ**ä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸€å®šç­–ç•¥ï¼ˆhashã€rangeç­‰ï¼‰ï¼Œå°†ä¸€ä¸ª**è¡¨**ä¸­çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ª**è¡¨**ä¸­ã€‚

**ç»“æœï¼š**

- æ¯ä¸ª**è¡¨**çš„**ç»“æ„**éƒ½ä¸€æ ·ï¼›
- æ¯ä¸ª**è¡¨**çš„**æ•°æ®**éƒ½ä¸ä¸€æ ·ï¼Œæ²¡æœ‰äº¤é›†ï¼›
- æ‰€æœ‰**è¡¨**çš„**å¹¶é›†**æ˜¯å…¨é‡æ•°æ®ï¼›

**åœºæ™¯ï¼š**

ç³»ç»Ÿç»å¯¹å¹¶å‘é‡å¹¶æ²¡æœ‰ä¸Šæ¥ï¼Œåªæ˜¯å•è¡¨çš„æ•°æ®é‡å¤ªå¤šï¼Œå½±å“äº†SQLæ•ˆç‡ï¼ŒåŠ é‡äº†CPUè´Ÿæ‹…ï¼Œä»¥è‡³äºæˆä¸ºç“¶é¢ˆã€‚

**åˆ†æï¼š**

è¡¨çš„æ•°æ®é‡å°‘äº†ï¼Œå•æ¬¡SQLæ‰§è¡Œæ•ˆç‡é«˜ï¼Œè‡ªç„¶å‡è½»äº†CPUçš„è´Ÿæ‹…ã€‚



#### 3.3 å‚ç›´åˆ†åº“

![æ•°æ®åº“-å‚ç›´åˆ†åº“](picture\æ•°æ®åº“-å‚ç›´åˆ†åº“.png)

**æ¦‚å¿µï¼š**

ä»¥**è¡¨**ä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸šåŠ¡å½’å±ä¸åŒï¼Œå°†ä¸åŒçš„**è¡¨**æ‹†åˆ†åˆ°ä¸åŒçš„**åº“**ä¸­ã€‚

**ç»“æœï¼š**

- æ¯ä¸ª**åº“**çš„**ç»“æ„**éƒ½ä¸ä¸€æ ·ï¼›
- æ¯ä¸ª**åº“**çš„**æ•°æ®**ä¹Ÿä¸ä¸€æ ·ï¼Œæ²¡æœ‰äº¤é›†ï¼›
- æ‰€æœ‰**åº“**çš„**å¹¶é›†**æ˜¯å…¨é‡æ•°æ®ï¼›

**åœºæ™¯ï¼š**

ç³»ç»Ÿç»å¯¹å¹¶å‘é‡ä¸Šæ¥äº†ï¼Œå¹¶ä¸”å¯ä»¥æŠ½è±¡å‡ºå•ç‹¬çš„ä¸šåŠ¡æ¨¡å—ã€‚

**åˆ†æï¼š**

åˆ°è¿™ä¸€æ­¥ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥æœåŠ¡åŒ–äº†ã€‚ä¾‹å¦‚ï¼Œéšç€ä¸šåŠ¡çš„å‘å±•ä¸€äº›å…¬ç”¨çš„é…ç½®è¡¨ã€å­—å…¸è¡¨ç­‰è¶Šæ¥è¶Šå¤šï¼Œè¿™æ—¶å¯ä»¥å°†è¿™äº›è¡¨æ‹†åˆ°å•ç‹¬çš„åº“ä¸­ï¼Œç”šè‡³å¯ä»¥æœåŠ¡åŒ–ã€‚å†æœ‰ï¼Œéšç€ä¸šåŠ¡çš„å‘å±•å­µåŒ–å‡ºäº†ä¸€å¥—ä¸šåŠ¡æ¨¡å¼ï¼Œè¿™æ—¶å¯ä»¥å°†ç›¸å…³çš„è¡¨æ‹†åˆ°å•ç‹¬çš„åº“ä¸­ï¼Œç”šè‡³å¯ä»¥æœåŠ¡åŒ–ã€‚



#### 3.4 å‚ç›´åˆ†è¡¨

![æ•°æ®åº“-å‚ç›´åˆ†è¡¨](picture\æ•°æ®åº“-å‚ç›´åˆ†è¡¨.png)

**æ¦‚å¿µï¼š**

ä»¥**å­—æ®µ**ä¸ºä¾æ®ï¼ŒæŒ‰ç…§å­—æ®µçš„æ´»è·ƒæ€§ï¼Œå°†**è¡¨**ä¸­å­—æ®µæ‹†åˆ°ä¸åŒçš„**è¡¨**ï¼ˆä¸»è¡¨å’Œæ‰©å±•è¡¨ï¼‰ä¸­ã€‚

**ç»“æœï¼š**

- æ¯ä¸ª**è¡¨**çš„**ç»“æ„**éƒ½ä¸ä¸€æ ·ï¼›
- æ¯ä¸ª**è¡¨**çš„**æ•°æ®**ä¹Ÿä¸ä¸€æ ·ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ¯ä¸ªè¡¨çš„**å­—æ®µ**è‡³å°‘æœ‰ä¸€åˆ—äº¤é›†ï¼Œä¸€èˆ¬æ˜¯ä¸»é”®ï¼Œç”¨äºå…³è”æ•°æ®ï¼›
- æ‰€æœ‰**è¡¨**çš„**å¹¶é›†**æ˜¯å…¨é‡æ•°æ®ï¼›

**åœºæ™¯ï¼š**

ç³»ç»Ÿç»å¯¹å¹¶å‘é‡å¹¶æ²¡æœ‰ä¸Šæ¥ï¼Œè¡¨çš„è®°å½•å¹¶ä¸å¤šï¼Œä½†æ˜¯å­—æ®µå¤šï¼Œå¹¶ä¸”çƒ­ç‚¹æ•°æ®å’Œéçƒ­ç‚¹æ•°æ®åœ¨ä¸€èµ·ï¼Œå•è¡Œæ•°æ®æ‰€éœ€çš„å­˜å‚¨ç©ºé—´è¾ƒå¤§ã€‚ä»¥è‡³äºæ•°æ®åº“ç¼“å­˜çš„æ•°æ®è¡Œå‡å°‘ï¼ŒæŸ¥è¯¢æ—¶ä¼šå»è¯»ç£ç›˜æ•°æ®äº§ç”Ÿå¤§é‡çš„éšæœºè¯»IOï¼Œäº§ç”ŸIOç“¶é¢ˆã€‚

**åˆ†æï¼š**

å¯ä»¥ç”¨åˆ—è¡¨é¡µå’Œè¯¦æƒ…é¡µæ¥å¸®åŠ©ç†è§£ã€‚å‚ç›´åˆ†è¡¨çš„æ‹†åˆ†åŸåˆ™æ˜¯å°†çƒ­ç‚¹æ•°æ®ï¼ˆå¯èƒ½ä¼šå†—ä½™ç»å¸¸ä¸€èµ·æŸ¥è¯¢çš„æ•°æ®ï¼‰æ”¾åœ¨ä¸€èµ·ä½œä¸ºä¸»è¡¨ï¼Œéçƒ­ç‚¹æ•°æ®æ”¾åœ¨ä¸€èµ·ä½œä¸ºæ‰©å±•è¡¨ã€‚è¿™æ ·æ›´å¤šçš„çƒ­ç‚¹æ•°æ®å°±èƒ½è¢«ç¼“å­˜ä¸‹æ¥ï¼Œè¿›è€Œå‡å°‘äº†éšæœºè¯»IOã€‚æ‹†äº†ä¹‹åï¼Œè¦æƒ³è·å¾—å…¨éƒ¨æ•°æ®å°±éœ€è¦å…³è”ä¸¤ä¸ªè¡¨æ¥å–æ•°æ®ã€‚ä½†è®°ä½ï¼Œåƒä¸‡åˆ«ç”¨joinï¼Œå› ä¸ºjoinä¸ä»…ä¼šå¢åŠ CPUè´Ÿæ‹…å¹¶ä¸”ä¼šè®²ä¸¤ä¸ªè¡¨è€¦åˆåœ¨ä¸€èµ·ï¼ˆå¿…é¡»åœ¨ä¸€ä¸ªæ•°æ®åº“å®ä¾‹ä¸Šï¼‰ã€‚å…³è”æ•°æ®ï¼Œåº”è¯¥åœ¨ä¸šåŠ¡Serviceå±‚åšæ–‡ç« ï¼Œåˆ†åˆ«è·å–ä¸»è¡¨å’Œæ‰©å±•è¡¨æ•°æ®ç„¶åç”¨å…³è”å­—æ®µå…³è”å¾—åˆ°å…¨éƒ¨æ•°æ®ã€‚



## 4.mysql

#### 4.1**MySQLç›®å‰ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ç´¢å¼•ç±»å‹ï¼š**

**1.æ™®é€šç´¢å¼•**

**2.å”¯ä¸€ç´¢å¼•**

**3.ä¸»é”®ç´¢å¼•**

**4.ç»„åˆç´¢å¼•**

**5.å…¨æ–‡ç´¢å¼•**

#### 4.2 **å›è¡¨:(å¯ä»¥ä½¿ç”¨ç´¢å¼•è¦†ç›–é¿å…å›è¡¨)**

**æ¯åˆ›å»ºä¸€ä¸ªç´¢å¼•å°±ä¼šåˆ›å»ºä¸ªB+æ ‘ï¼Œå¦‚æœé€šè¿‡idä½å»ºå’Œnameåˆ›å»ºäº†ç´¢å¼•ï¼Œåœ¨æ‰§è¡Œä¸‹é¢çš„sqlæ—¶ã€‚**

**1.é¦–å…ˆå»nameçš„B+æ ‘æ‰¾åˆ°å¯¹åº”çš„å€¼ï¼Œå€¼æ˜¯idï¼Œ2.å†é€šè¿‡idçš„B+æ ‘æ‰¾åˆ°å¯¹åº”çš„å€¼å–å‡º**

**ä¸ºä»€ä¹ˆå›è¡¨**ï¼šMySQL innodbçš„ä¸»é”®ç´¢å¼•æ˜¯ç°‡é›†ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜çš„æ˜¯æ•´ä¸ªå•æ¡è®°å½•çš„æ‰€æœ‰å­—æ®µå€¼ï¼Œä¸æ˜¯ä¸»é”®ç´¢å¼•çš„å°±æ˜¯éç°‡é›†ç´¢å¼•ï¼Œéç°‡é›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜çš„æ˜¯ä¸»é”®å­—æ®µçš„å€¼

![mysql-å›è¡¨](picture\mysql-å›è¡¨.png)

#### 4.3 **ç´¢å¼•è¦†ç›–ï¼š**

  **è¿˜æ˜¯ä¸Šé¢å›è¡¨çš„ä¸¤å¼ è¡¨ï¼š**

  **ç¬¬ä¸€ä¸ªsql:** **select id,name from t where name='lisi'**

**èƒ½å¤Ÿå‘½ä¸­nameç´¢å¼•ï¼Œç´¢å¼•å¶å­èŠ‚ç‚¹å­˜å‚¨äº†ä¸»é”®idï¼Œé€šè¿‡nameçš„ç´¢å¼•æ ‘å³å¯è·å–idå’Œnameï¼Œæ— éœ€å›è¡¨ï¼Œç¬¦åˆç´¢å¼•è¦†ç›–ï¼Œæ•ˆç‡è¾ƒé«˜**

 **ç¬¬ä¸€ä¸ªsql:** **select id,name,sex from t where name='lisi'**

â€‹       **èƒ½å¤Ÿå‘½ä¸­nameç´¢å¼•ï¼Œç´¢å¼•å¶å­èŠ‚ç‚¹å­˜å‚¨äº†ä¸»é”®idï¼Œä½†sexå­—æ®µå¿…é¡»å›è¡¨æŸ¥è¯¢æ‰èƒ½è·å–åˆ°ï¼Œä¸ç¬¦åˆç´¢å¼•è¦†ç›–ï¼Œéœ€è¦å†æ¬¡é€šè¿‡idå€¼æ‰«ç èšé›†ç´¢å¼•è·å–sexå­—æ®µï¼Œæ•ˆç‡ä¼šé™ä½**

â€‹       **å¦‚æœæŠŠ(name)å•åˆ—ç´¢å¼•å‡çº§ä¸ºè”åˆç´¢å¼•(name, sex)å°±ä¸åŒäº†ã€‚å¯ä»¥çœ‹åˆ°ï¼Œèƒ½å¤Ÿå‘½ä¸­ç´¢å¼•è¦†ç›–ï¼Œæ— éœ€å›è¡¨**



#### 4.4 æœ€å·¦åŒ¹é…åŸåˆ™

â€‹	**æœ€å·¦åŒ¹é…åŸåˆ™å°±æ˜¯æŒ‡åœ¨è”åˆç´¢å¼•ä¸­ï¼Œå¦‚æœä½ çš„ SQL è¯­å¥ä¸­ç”¨åˆ°äº†è”åˆç´¢å¼•ä¸­çš„æœ€å·¦è¾¹çš„ç´¢å¼•ï¼Œé‚£ä¹ˆè¿™æ¡ SQL è¯­å¥å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªè”åˆç´¢å¼•å»è¿›è¡ŒåŒ¹é…ã€‚ä¾‹å¦‚æŸè¡¨ç°æœ‰ç´¢å¼•(a,b,c)ï¼Œç°åœ¨ä½ æœ‰å¦‚ä¸‹è¯­å¥ï¼š**

select * from t where a=1 and b=1 and c =1; 			 #è¿™æ ·å¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰ 

select * from t where a=1 and b=1;					 #è¿™æ ·å¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰ 

select * from t where a=1;						 #è¿™æ ·ä¹Ÿå¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰ 

select * from t where b=1 and c=1; 					 #è¿™æ ·ä¸å¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰ 

select * from t where a=1 and c=1; 					 #è¿™æ ·ä¸å¯ä»¥åˆ©ç”¨åˆ°å®šä¹‰çš„ç´¢å¼•ï¼ˆa,b,cï¼‰

**ä¹Ÿå°±æ˜¯è¯´é€šè¿‡æœ€å·¦åŒ¹é…åŸåˆ™ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªè”åˆç´¢å¼•ï¼Œä½†æ˜¯ä½¿å¾—å¤šä¸­æŸ¥è¯¢æ¡ä»¶éƒ½å¯ä»¥ç”¨åˆ°è¯¥ç´¢å¼•ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“é‡åˆ°èŒƒå›´æŸ¥è¯¢(>ã€<ã€betweenã€like)å°±ä¼šåœæ­¢åŒ¹é…ã€‚ä¹Ÿå°±æ˜¯ï¼š**

**select** ***** **from** t **where** a**=**1 **and** b**>**1 **and** **c** **=**1;     **#**è¿™æ ·a,bå¯ä»¥ç”¨åˆ°ï¼ˆa,b,**c**ï¼‰ï¼Œcä¸å¯ä»¥

**æ€»ç»“ï¼š**

åœ¨ InnoDB ä¸­è”åˆç´¢å¼•åªæœ‰å…ˆç¡®å®šäº†å‰ä¸€ä¸ªï¼ˆå·¦ä¾§çš„å€¼ï¼‰åï¼Œæ‰èƒ½ç¡®å®šä¸‹ä¸€ä¸ªå€¼ã€‚å¦‚æœæœ‰èŒƒå›´æŸ¥è¯¢çš„è¯ï¼Œé‚£ä¹ˆè”åˆç´¢å¼•ä¸­ä½¿ç”¨èŒƒå›´æŸ¥è¯¢çš„å­—æ®µåçš„ç´¢å¼•åœ¨è¯¥æ¡ SQL ä¸­éƒ½ä¸ä¼šèµ·ä½œç”¨ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œin å’Œ = éƒ½å¯ä»¥ä¹±åºï¼Œæ¯”å¦‚æœ‰ç´¢å¼•ï¼ˆa,b,cï¼‰ï¼Œè¯­å¥ select * from t where c =1 and a=1 and b=1ï¼Œè¿™æ ·çš„è¯­å¥ä¹Ÿå¯ä»¥ç”¨åˆ°æœ€å·¦åŒ¹é…ï¼Œå› ä¸º MySQL ä¸­æœ‰ä¸€ä¸ªä¼˜åŒ–å™¨ï¼Œä»–ä¼šåˆ†æ SQL è¯­å¥ï¼Œå°†å…¶ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥åŒ¹é…çš„å½¢å¼ï¼Œå³ select * from t where a =1 and a=1 and c=1



#### 4.5 sqlçš„left join ã€right join ã€inner joinä¹‹é—´çš„åŒºåˆ«

ã€€ã€€left join(å·¦è”æ¥) è¿”å›åŒ…æ‹¬å·¦è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå³è¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰çš„è®°å½• 
ã€€ã€€right join(å³è”æ¥) è¿”å›åŒ…æ‹¬å³è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå·¦è¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰çš„è®°å½•
ã€€ã€€inner join(ç­‰å€¼è¿æ¥) åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰çš„è¡Œ



#### **4.6 é”**   

#####  4.5.1 è¡¨é”

 **è¯»é”(å…±äº«é”)ï¼šé’ˆå¯¹åŒä¸€ä»½æ•°æ®ï¼Œå¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œäº’ä¸å½±å“          lock table è¡¨å read;**

  **ä¾‹å­ï¼šsession1ç»™bookè¡¨åŠ äº†è¯»é”ï¼Œå®ƒå¯ä»¥è¯»å–bookè¡¨ï¼Œä½†æ˜¯ä¸èƒ½è¯»å–å…¶å®ƒçš„è¡¨ï¼Œè€Œä¸”ä¸èƒ½ä¿®æ”¹bookè¡¨é‡Œçš„æ•°æ®**

â€‹             **session2å¯ä»¥è¯»å–bookè¡¨ï¼Œä¹Ÿå¯ä»¥è¯»å–å’Œä¿®æ”¹å…¶å®ƒæœªåŠ é”çš„è¡¨ï¼Œä½†æ˜¯å®ƒä¿®æ”¹bookè¡¨æ—¶ä¼šé˜»å¡ï¼Œç›´è‡³bookè¡¨é‡Šæ”¾äº†é”**

  **å†™é”(æ’å®ƒé”) ï¼šå½“å‰æ“ä½œæ²¡æœ‰å®Œæˆä¹‹å‰ï¼Œå®ƒä¼šé˜»æ–­å…¶ä»–å†™é”å’Œè¯»é”          lock table è¡¨å write;**

 **ä¾‹å­ï¼š   session1ç»™bookè¡¨åŠ äº†å†™é”ï¼Œå®ƒå¯ä»¥è¯»å–bookè¡¨ï¼Œèƒ½ä¿®æ”¹å’Œè¯»bookè¡¨ï¼Œä½†æ˜¯ä¸èƒ½è¯»å–å’Œä¿®æ”¹å…¶å®ƒé”ã€‚**

â€‹             **session2ä¿®æ”¹å’Œè¯»bookè¡¨æ—¶ä¼šé˜»å¡ï¼Œç›´è‡³bookè¡¨é‡Šæ”¾äº†é”**

**æ€»ç»“ï¼šç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è¯»é”ä¼šé˜»å¡å†™ï¼Œä½†æ˜¯ä¸ä¼šé˜»å¡è¯»ã€‚è€Œå†™é”åˆ™ä¼šæŠŠè¯»å’Œå†™å…¨éƒ¨é˜»å¡**

##### 4.5.2 è¡Œé”

   **è¡Œé”çš„åŠ£åŠ¿ï¼šå¼€é”€å¤§ï¼›åŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”**

   **è¡Œé”çš„ä¼˜åŠ¿ï¼šé”çš„ç²’åº¦å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡ä½ï¼›å¤„ç†å¹¶å‘çš„èƒ½åŠ›å¼º**

   **åŠ é”çš„æ–¹å¼ï¼šè‡ªåŠ¨åŠ é”ã€‚å¯¹äºUPDATEã€DELETEå’ŒINSERTè¯­å¥ï¼ŒInnoDBä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æ’ä»–é”ï¼›å¯¹äºæ™®é€šSELECTè¯­å¥ï¼ŒInnoDBä¸ä¼šåŠ ä»»ä½•é”ï¼›å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜¾ç¤ºçš„åŠ é”ï¼š**

   **å…±äº«é”ï¼šselect \* from tableName where ... + lock in share more**

   **æ’ä»–é”ï¼šselect \* from tableName where ... + for update**



# RabbitMQ

> 1. rabbitmqctl stop_app - å…³é—­åº”ç”¨
>
> 2. rabbitmqctl reset - æ¸…é™¤é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯
>
> 3. rabbitmqctl start_app - å†æ¬¡å¯åŠ¨æ­¤åº”ç”¨

## 1.RabbitMQå…­ç§å·¥ä½œæ–¹å¼

### 1.1 ç®€å•æ¨¡å¼

> ä¸€ä¸ªç”Ÿäº§è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…

![mq-ç®€å•æ¨¡å¼](picture\mq-ç®€å•æ¨¡å¼.jpg)



### 1.2 Work queues(å·¥ä½œæ¨¡å¼)

> work queuesä¸å…¥é—¨ç¨‹åºç›¸æ¯”ï¼Œå¤šäº†ä¸€ä¸ªæ¶ˆè´¹ç«¯ï¼Œä¸¤ä¸ªæ¶ˆè´¹ç«¯å…±åŒæ¶ˆè´¹åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚

åº”ç”¨åœºæ™¯ï¼šå¯¹äº ä»»åŠ¡è¿‡é‡æˆ–ä»»åŠ¡è¾ƒå¤šæƒ…å†µä½¿ç”¨å·¥ä½œé˜Ÿåˆ—å¯ä»¥æé«˜ä»»åŠ¡å¤„ç†çš„é€Ÿåº¦ã€‚

æµ‹è¯•ï¼š

1ã€ä½¿ç”¨å…¥é—¨ç¨‹åºï¼Œå¯åŠ¨å¤šä¸ªæ¶ˆè´¹è€…ã€‚

2ã€ç”Ÿäº§è€…å‘é€å¤šä¸ªæ¶ˆæ¯ã€‚

ç»“æœï¼š

1ã€ä¸€æ¡æ¶ˆæ¯åªä¼šè¢«ä¸€ä¸ªæ¶ˆè´¹è€…æ¥æ”¶ï¼›

2ã€rabbité‡‡ç”¨è½®è¯¢çš„æ–¹å¼å°†æ¶ˆæ¯æ˜¯å¹³å‡å‘é€ç»™æ¶ˆè´¹è€…çš„ï¼›

3ã€æ¶ˆè´¹è€…åœ¨å¤„ç†å®ŒæŸæ¡æ¶ˆæ¯åï¼Œæ‰ä¼šæ”¶åˆ°ä¸‹ä¸€æ¡æ¶ˆæ¯ã€‚

![mq-å·¥ä½œæ¨¡å¼](picture\mq-å·¥ä½œæ¨¡å¼.jpg)



### 1.3 Publish/subscribe(å‘å¸ƒè®¢é˜…æ¨¡å¼)

> 1ã€æ¯ä¸ªæ¶ˆè´¹è€…ç›‘å¬è‡ªå·±çš„é˜Ÿåˆ—ã€‚
>
> 2ã€ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘ç»™brokerï¼Œç”±äº¤æ¢æœºå°†æ¶ˆæ¯è½¬å‘åˆ°ç»‘å®šæ­¤äº¤æ¢æœºçš„æ¯ä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªç»‘å®šäº¤æ¢æœºçš„é˜Ÿåˆ—éƒ½å°†æ¥æ”¶åˆ°æ¶ˆæ¯

1.å®šä¹‰ä¸€ä¸ªè®¢é˜…æ¨¡å¼çš„äº¤æ¢æœºï¼šFanoutExchangeäº¤æ¢æœºã€‚
2.åˆ›å»º2ä¸ªé˜Ÿåˆ—helloAï¼ŒhelloBï¼Œç„¶åå°†è¿™ä¸¤ä¸ªé˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢æœºä¸Šé¢ã€‚

![mq-å‘å¸ƒè®¢é˜…](picture\mq-å‘å¸ƒè®¢é˜…æ¨¡å¼.jpg)



### 1.4 Routing(è·¯ç”±æ¨¡å¼)

> 1ã€æ¯ä¸ªæ¶ˆè´¹è€…ç›‘å¬è‡ªå·±çš„é˜Ÿåˆ—ï¼Œå¹¶ä¸”è®¾ç½®routingkeyã€‚
>
> 2ã€ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘ç»™äº¤æ¢æœºï¼Œç”±äº¤æ¢æœºæ ¹æ®routingkeyæ¥è½¬å‘æ¶ˆæ¯åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ã€‚

![mq-è·¯ç”±æ¨¡å¼](picture\mq-è·¯ç”±æ¨¡å¼.jpg)



### 1.5 Topics(é€šé…ç¬¦æ¨¡å¼)

> 1ã€æ¯ä¸ªæ¶ˆè´¹è€…ç›‘å¬è‡ªå·±çš„é˜Ÿåˆ—ï¼Œå¹¶ä¸”è®¾ç½®å¸¦ç»Ÿé…ç¬¦çš„routingkeyã€‚
>
> 2ã€ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘ç»™brokerï¼Œç”±äº¤æ¢æœºæ ¹æ®routingkeyæ¥è½¬å‘æ¶ˆæ¯åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ã€‚

![mq-topicæ¨¡å¼](picture\mq-topicæ¨¡å¼.jpg)



## 2.å¦‚ä½•ä¿è¯é«˜å¯ç”¨æ€§å’Œå¹‚ç­‰æ€§

### 2.1 è§£å†³å¹‚ç­‰æ€§

**å…¨å±€å”¯ä¸€ID + Redis**



### 2.2 ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±

#### 2.2.1ç”Ÿäº§è€…

1.é€šè¿‡å®ç° ConfirmCallback æ¥å£ï¼Œæ¶ˆæ¯å‘é€åˆ° Broker åè§¦å‘å›è°ƒï¼Œç¡®è®¤æ¶ˆæ¯æ˜¯å¦åˆ°è¾¾ Broker æœåŠ¡å™¨,ä¹Ÿå°±æ˜¯åªç¡®è®¤æ˜¯å¦æ­£ç¡®åˆ°è¾¾ Exchange ä¸­

2.é€šè¿‡å®ç° ReturnCallback æ¥å£ï¼Œå¯åŠ¨æ¶ˆæ¯å¤±è´¥è¿”å›ï¼Œæ¯”å¦‚è·¯ç”±ä¸åˆ°é˜Ÿåˆ—æ—¶è§¦å‘å›è°ƒ



#### 2.2.2 æ¶ˆè´¹è€…

1.é€šè¿‡æ‰‹åŠ¨ackå’Œæ‰‹åŠ¨ç­¾æ”¶ä¿è¯æ¶ˆæ¯è¢«æ­£ç¡®æ¶ˆè´¹äº†

2.å¼€å¯æ¶ˆè´¹è€…(ç¨‹åºå‡ºç°å¼‚å¸¸)é‡è¯•æœºåˆ¶ï¼Œé»˜è®¤å¼€å¯å¹¶ä¸€ç›´é‡è¯•



#### 2.2.3 æ­»ä¿¡é˜Ÿåˆ—

ç”±äºæŸäº›åŸå› æ¶ˆæ¯æ— æ³•è¢«æ­£ç¡®çš„æŠ•é€’ï¼Œä¸ºäº†ç¡®ä¿æ¶ˆæ¯ä¸ä¼šè¢«æ— æ•…çš„ä¸¢å¼ƒï¼Œä¸€èˆ¬å°†å…¶ç½®äºä¸€ä¸ªç‰¹æ®Šè§’è‰²çš„é˜Ÿåˆ—ï¼Œè¿™ä¸ªé˜Ÿåˆ—ä¸€èˆ¬ç§°ä¹‹ä¸ºæ­»ä¿¡é˜Ÿåˆ—



#### 2.2.4 å»¶è¿Ÿé˜Ÿåˆ—

ç»™ç»‘å®šçš„é˜Ÿåˆ—Aè®¾ç½®è®¾ç½®é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰æ¶ˆæ¯çš„ç”Ÿå­˜å‘¨æœŸ(Message TTL(x-message-ttl)ï¼‰ï¼ŒåŒæ—¶ç»‘å®šæ­»ä¿¡é˜Ÿåˆ—ï¼Œæ­¤æ—¶é˜Ÿåˆ—Aä¸è¿›è¡Œæ¶ˆè´¹ï¼Œè¿™æ—¶ç”Ÿå­˜å‘¨æœŸä¸€è¿‡ï¼Œå°±ä¼šè¿›å…¥åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œè¿™æ—¶æ­»ä¿¡é˜Ÿåˆ—è¿›è¡Œæ¶ˆè´¹ï¼Œè¿™æ—¶å°±å®ç°äº†å»¶è¿Ÿé˜Ÿåˆ—çš„ä½œç”¨



# Redis

## 1.Redisäº”ç§æ•°æ®ç±»å‹

### 1.1 String

> string æ˜¯ redis æœ€åŸºæœ¬çš„ç±»å‹ï¼Œä½ å¯ä»¥ç†è§£æˆä¸ Memcached ä¸€æ¨¡ä¸€æ ·çš„ç±»å‹ï¼Œä¸€ä¸ª key å¯¹åº”ä¸€ä¸ª valueã€‚
>
> å¸¸ç”¨å‘½ä»¤ï¼šsetã€getã€decrã€incrã€mgetç­‰ã€‚



### 1.2 **Hashï¼ˆå“ˆå¸Œï¼‰**

> Redis hash æ˜¯ä¸€ä¸ªé”®å€¼(key=>value)å¯¹é›†åˆï¼›æ˜¯ä¸€ä¸ª string ç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚
>
> å¸¸ç”¨å‘½ä»¤ï¼šhgetã€hsetã€hgetallç­‰ã€‚

åº”ç”¨åœºæ™¯ï¼šå­˜å‚¨ä¸€äº›ç»“æ„åŒ–çš„æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·çš„æ˜µç§°ã€å¹´é¾„ã€æ€§åˆ«ã€ç§¯åˆ†ç­‰ï¼Œå­˜å‚¨ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯å¯¹è±¡æ•°æ®ã€‚



### 1.3 **Listï¼ˆåˆ—è¡¨ï¼‰**

> Redis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰ã€‚
>
> å¸¸ç”¨å‘½ä»¤ï¼šlpushã€rpushã€lpopã€rpopã€lrangeç­‰ã€‚

listç±»å‹ç»å¸¸ä¼šè¢«ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—çš„æœåŠ¡ï¼Œä»¥å®Œæˆå¤šç¨‹åºä¹‹é—´çš„æ¶ˆæ¯äº¤æ¢ã€‚



### 1.4 **Setï¼ˆé›†åˆï¼‰**

> Redisçš„Setæ˜¯stringç±»å‹çš„æ— åºé›†åˆã€‚å’Œåˆ—è¡¨ä¸€æ ·ï¼Œåœ¨æ‰§è¡Œæ’å…¥å’Œåˆ é™¤å’Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸå…ƒç´ æ—¶ï¼Œæ•ˆç‡æ˜¯å¾ˆé«˜çš„
>
> å¸¸ç”¨å‘½ä»¤ï¼šsaddã€spopã€smembersã€sunionç­‰ã€‚

åº”ç”¨åœºæ™¯ï¼š

1ã€åˆ©ç”¨äº¤é›†æ±‚å…±åŒå¥½å‹ã€‚

2ã€åˆ©ç”¨å”¯ä¸€æ€§ï¼Œå¯ä»¥ç»Ÿè®¡è®¿é—®ç½‘ç«™çš„æ‰€æœ‰ç‹¬ç«‹IPã€‚

3ã€å¥½å‹æ¨èçš„æ—¶å€™æ ¹æ®tagæ±‚äº¤é›†ï¼Œå¤§äºæŸä¸ªthresholdï¼ˆä¸´ç•Œå€¼çš„ï¼‰å°±å¯ä»¥æ¨èã€‚



### 1.5 **zset(sorted setï¼šæœ‰åºé›†åˆ)**

> Redis zset å’Œ set ä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚zsetçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚
>
> å¸¸ç”¨å‘½ä»¤ï¼šzaddã€zrangeã€zremã€zcardç­‰ã€‚

å½“ä½ éœ€è¦ä¸€ä¸ªæœ‰åºçš„å¹¶ä¸”ä¸é‡å¤çš„é›†åˆåˆ—è¡¨æ—¶ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©sorted setæ•°æ®ç»“æ„ã€‚

åº”ç”¨ä¸¾ä¾‹ï¼š

ï¼ˆ1ï¼‰ä¾‹å¦‚å­˜å‚¨å…¨ç­åŒå­¦çš„æˆç»©ï¼Œå…¶é›†åˆvalueå¯ä»¥æ˜¯åŒå­¦çš„å­¦å·ï¼Œè€Œscoreå°±å¯ä»¥æ˜¯æˆç»©ã€‚
ï¼ˆ2ï¼‰æ’è¡Œæ¦œåº”ç”¨ï¼Œæ ¹æ®å¾—åˆ†åˆ—å‡ºtopNçš„ç”¨æˆ·ç­‰ã€‚



## 2 Redisçš„å¤±æ•ˆç­–ç•¥

> **å‚è€ƒæ–‡çŒ®ï¼š**https://www.cnblogs.com/dudu2mama/p/11366292.html

- noeviction: ä¸åˆ é™¤ç­–ç•¥, è¾¾åˆ°æœ€å¤§å†…å­˜é™åˆ¶æ—¶, å¦‚æœéœ€è¦æ›´å¤šå†…å­˜, ç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯ã€‚ å¤§å¤šæ•°å†™å‘½ä»¤éƒ½ä¼šå¯¼è‡´å ç”¨æ›´å¤šçš„å†…å­˜(æœ‰æå°‘æ•°ä¼šä¾‹å¤–, å¦‚ [DEL](https://redis.io/commands/del) )ã€‚
- allkeys-lruï¼šæ‰€æœ‰keyé€šç”¨; ä¼˜å…ˆåˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨(less recently used ,LRU) çš„ keyã€‚
- allkeys-randomï¼š æ‰€æœ‰keyé€šç”¨; éšæœºåˆ é™¤ä¸€éƒ¨åˆ† keyã€‚
- volatile-lruï¼šåªé™äºè®¾ç½®äº† expire çš„éƒ¨åˆ†; ä¼˜å…ˆåˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨(less recently used ,LRU) çš„ keyã€‚
- volatile-randomï¼šåªé™äºè®¾ç½®äº† expire çš„éƒ¨åˆ†; éšæœºåˆ é™¤ä¸€éƒ¨åˆ† keyã€‚
- volatile-ttlï¼šåªé™äºè®¾ç½®äº† expire çš„éƒ¨åˆ†; ä¼˜å…ˆåˆ é™¤å‰©ä½™æ—¶é—´(time to live,TTL) çŸ­çš„keyã€‚



## 3.Redisçš„æŒä¹…åŒ–æ–¹å¼

#### 3.1 AOF(å¿«ç…§)æŒä¹…åŒ–é…ç½®

Redisä¼šå°†æ•°æ®é›†çš„å¿«ç…§dumpåˆ°dump.rdbæ–‡ä»¶ä¸­ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥ä¿®æ”¹RedisæœåŠ¡å™¨dumpå¿«ç…§çš„é¢‘ç‡ï¼Œåœ¨æ‰“å¼€6379.confæ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬æœç´¢saveï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„é…ç½®ä¿¡æ¯ï¼š

save 900 1       #åœ¨900ç§’(15åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰1ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼Œåˆ™dumpå†…å­˜å¿«ç…§ã€‚

save 300 10      #åœ¨300ç§’(5åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰10ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼Œåˆ™dumpå†…å­˜å¿«ç…§ã€‚

save 60 10000    #åœ¨60ç§’(1åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰10000ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼Œåˆ™dumpå†…å­˜å¿«ç…§ã€‚

#### 3.2 RDBæŒä¹…åŒ–é…ç½®

ppendfsync always   #æ¯æ¬¡æœ‰æ•°æ®ä¿®æ”¹å‘ç”Ÿæ—¶éƒ½ä¼šå†™å…¥AOFæ–‡ä»¶ã€‚

appendfsync everysec #æ¯ç§’é’ŸåŒæ­¥ä¸€æ¬¡ï¼Œè¯¥ç­–ç•¥ä¸ºAOFçš„ç¼ºçœç­–ç•¥ã€‚

appendfsync no     #ä»ä¸åŒæ­¥ã€‚é«˜æ•ˆä½†æ˜¯æ•°æ®ä¸ä¼šè¢«æŒä¹…åŒ–ã€‚

## 4.Redisçš„ä¸‰ç§é›†ç¾¤æ–¹å¼

> **å‚è€ƒæ–‡çŒ®ï¼š**https://www.cnblogs.com/51life/p/10233340.html

redisæœ‰ä¸‰ç§é›†ç¾¤æ–¹å¼ï¼šä¸»ä»å¤åˆ¶ï¼Œå“¨å…µæ¨¡å¼å’Œé›†ç¾¤ã€‚

### 4.1 ä¸»ä»å¤åˆ¶

> 1.ä¸»æœºä¼šè‡ªåŠ¨å°†æ•°æ®åŒæ­¥åˆ°ä»æœºï¼Œå¯ä»¥è¿›è¡Œè¯»å†™åˆ†ç¦»
>
> 2.Redisä¸å…·å¤‡è‡ªåŠ¨å®¹é”™å’Œæ¢å¤åŠŸèƒ½ï¼Œå¦‚æœä¸»æœºå®•æœºä¸èƒ½è‡ªåŠ¨åˆ‡æ¢



### 4.2 å“¨å…µæ¨¡å¼

> 1.ç›‘æ§ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚ 
>
> 2.ä¸»æœåŠ¡å™¨å‡ºç°æ•…éšœæ—¶è‡ªåŠ¨å°†ä»æœåŠ¡å™¨è½¬æ¢ä¸ºä¸»æœåŠ¡å™¨ã€‚



### 4.3 Redis-Cluster é›†ç¾¤

redisçš„å“¨å…µæ¨¡å¼åŸºæœ¬å·²ç»å¯ä»¥å®ç°é«˜å¯ç”¨ï¼Œè¯»å†™åˆ†ç¦» ï¼Œä½†æ˜¯åœ¨è¿™ç§æ¨¡å¼ä¸‹æ¯å°redisæœåŠ¡å™¨éƒ½å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œå¾ˆæµªè´¹å†…å­˜ï¼Œæ‰€ä»¥åœ¨redis3.0ä¸ŠåŠ å…¥äº†clusteræ¨¡å¼ï¼Œå®ç°çš„redisçš„åˆ†å¸ƒå¼å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯å°redisèŠ‚ç‚¹ä¸Šå­˜å‚¨ä¸åŒçš„å†…å®¹ã€‚

åœ¨redisçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œéƒ½æœ‰è¿™ä¹ˆä¸¤ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯æ’æ§½ï¼ˆslotï¼‰ï¼Œå®ƒçš„çš„å–å€¼èŒƒå›´æ˜¯ï¼š0-16383ã€‚è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯clusterï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªé›†ç¾¤ç®¡ç†çš„æ’ä»¶ã€‚å½“æˆ‘ä»¬çš„å­˜å–çš„keyåˆ°è¾¾çš„æ—¶å€™ï¼Œredisä¼šæ ¹æ®crc16çš„ç®—æ³•å¾—å‡ºä¸€ä¸ªç»“æœï¼Œç„¶åæŠŠç»“æœå¯¹ 16384 æ±‚ä½™æ•°ï¼Œè¿™æ ·æ¯ä¸ª key éƒ½ä¼šå¯¹åº”ä¸€ä¸ªç¼–å·åœ¨ 0-16383 ä¹‹é—´çš„å“ˆå¸Œæ§½ï¼Œé€šè¿‡è¿™ä¸ªå€¼ï¼Œå»æ‰¾åˆ°å¯¹åº”çš„æ’æ§½æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œç„¶åç›´æ¥è‡ªåŠ¨è·³è½¬åˆ°è¿™ä¸ªå¯¹åº”çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œå­˜å–æ“ä½œã€‚

ä¸ºäº†ä¿è¯é«˜å¯ç”¨ï¼Œredis-clusteré›†ç¾¤å¼•å…¥äº†ä¸»ä»æ¨¡å¼ï¼Œä¸€ä¸ªä¸»èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªæˆ–è€…å¤šä¸ªä»èŠ‚ç‚¹ï¼Œå½“ä¸»èŠ‚ç‚¹å®•æœºçš„æ—¶å€™ï¼Œå°±ä¼šå¯ç”¨ä»èŠ‚ç‚¹ã€‚å½“å…¶å®ƒä¸»èŠ‚ç‚¹pingä¸€ä¸ªä¸»èŠ‚ç‚¹Aæ—¶ï¼Œå¦‚æœåŠæ•°ä»¥ä¸Šçš„ä¸»èŠ‚ç‚¹ä¸Aé€šä¿¡è¶…æ—¶ï¼Œé‚£ä¹ˆè®¤ä¸ºä¸»èŠ‚ç‚¹Aå®•æœºäº†ã€‚å¦‚æœä¸»èŠ‚ç‚¹Aå’Œå®ƒçš„ä»èŠ‚ç‚¹A1éƒ½å®•æœºäº†ï¼Œé‚£ä¹ˆè¯¥é›†ç¾¤å°±æ— æ³•å†æä¾›æœåŠ¡äº†ã€‚



## 5.ç¼“å­˜é›ªå´© ç¼“å­˜ç©¿é€ ç¼“å­˜å‡»ç©¿

>   **å‚è€ƒæ–‡çŒ®:**  https://www.cnblogs.com/xichji/p/11286443.html



## 6 Redisåˆ†å¸ƒå¼é”

```java
/**
 * rediså·¥å…·ç±»
 *
 */
@Component
public class RedisUtil {
   
   private static Logger logger = LoggerFactory.getLogger(RedisUtil.class);
   
   @Autowired
   private RedisTemplate<Object, Object> redisTemplate;
   
   @Autowired
   private StringRedisTemplate stringRedisTemplate;
   
   /**
    * è®¾ç½®è¿‡æœŸæ—¶é—´
    * @param key
    * @param time, é»˜è®¤æ—¶é—´å•ä½ï¼Œç§’
    * @return
    */
   public boolean expire(String key, long time) {
        return this.expire(key, time, null);
    }
   
   /**
    * è®¾ç½®è¿‡æœŸæ—¶é—´
    * @param key
    * @param time
    * @param unit
    * @return
    */
   public boolean expire(String key, long time, TimeUnit unit) {
        try {
            if (time > 0) {
               redisTemplate.expire(key, time, unit == null ? TimeUnit.SECONDS : unit);
            }
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }
   
    /**
     * è·å–è¿‡æœŸæ—¶é—´
     * @param key
     * @return
     */
    public long getExpire(String key) {
        return redisTemplate.getExpire(key, TimeUnit.SECONDS);
    }
    
    /**
     * æŸ¥è¯¢keyæ˜¯å¦å­˜åœ¨
     * @param key
     * @return
     */
    public boolean hasKey(String key) {
        try {
            return redisTemplate.hasKey(key);
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }
    
    /**
     * åˆ é™¤ç¼“å­˜
     * @param key å¯ä»¥ä¼ ä¸€ä¸ªå€¼ æˆ–å¤šä¸ª
     */
    @SuppressWarnings("unchecked")
   public void del(String... key) {
        if (key != null && key.length > 0) {
            if (key.length == 1) {
               redisTemplate.delete(key[0]);
            } else {
               redisTemplate.delete(CollectionUtils.arrayToList(key));
            }
        }
    }
   
   /**
    * æŸ¥è¯¢å¯¹è±¡å€¼
    * @param key
    * @return
    */
   public Object getObject(String key) {
      return redisTemplate.opsForValue().get(key);
   }
   
   /**
    * æŸ¥è¯¢å­—ç¬¦ä¸²å€¼
    * @param key
    * @return
    */
   public String getString (String key) {
      return (String)getObject(key);
   }
   
    /**
     * æ™®é€šç¼“å­˜æ”¾å…¥,é»˜è®¤æ— è¿‡æœŸæ—¶é—´
     * @param key é”®
     * @param value å€¼
     * @return trueæˆåŠŸ falseå¤±è´¥
     */
    public boolean set(String key, Object value) {
       return set(key, value, 0, null);
    }
   
    /**
     * æ™®é€šç¼“å­˜æ”¾å…¥
     * @param key
     * @param value
     * @param timeout
     * @param unit
     * @return trueæˆåŠŸ falseå¤±è´¥
     */
    public boolean set(String key, Object value, long timeout, TimeUnit unit) {
        try {
           if(timeout > 0) {
              redisTemplate.opsForValue().set(key, value, timeout, unit);
           }else {
              redisTemplate.opsForValue().set(key, value);
           }
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }
    
    public boolean lock(String key, String uniqueIdentifier, long timeout) {
        if (stringRedisTemplate.opsForValue().setIfAbsent(key, uniqueIdentifier)) {
           stringRedisTemplate.expire(key, timeout, TimeUnit.MILLISECONDS);
           return true;
        }
        //åˆ¤æ–­é”è¶…æ—¶ - é˜²æ­¢åŸæ¥çš„æ“ä½œå¼‚å¸¸ï¼Œæ²¡æœ‰è¿è¡Œè§£é”æ“ä½œ  é˜²æ­¢æ­»é”
        String uuidWithTime = stringRedisTemplate.opsForValue().get(key);
        //å¦‚æœé”è¿‡æœŸ
        if (StringUtils.isNotEmpty(uuidWithTime)) {
            long timeMillis = Long.parseLong(uuidWithTime.split("\\|")[1]);
            if (timeMillis < System.currentTimeMillis()) {
                // å¾—åˆ°åŸæ¥é”çš„æ—§å€¼å¹¶ä¸”è®¾ç½®æ–°å€¼
                String oldValue = stringRedisTemplate.opsForValue().getAndSet(key, uniqueIdentifier);
                stringRedisTemplate.expire(key, timeout, TimeUnit.MILLISECONDS);
                // oldValueä¸èƒ½ä¸ºç©º(ä¿è¯æ­¤æ—¶keyè¿˜å­˜åœ¨)ï¼ŒoldValue.equals(uuidWithTime)ä¿è¯è¿˜æ˜¯åˆå§‹çš„key,å¹¶æ²¡æœ‰è¿›è¡Œæ–°çš„åŠ é”èµ‹å€¼
                return StringUtils.isNotEmpty(oldValue) && oldValue.equals(uuidWithTime);
            }
        }
        return false;
    }

    public void unlock(String key, String uniqueIdentifier) {
       try {
            String identifier = stringRedisTemplate.opsForValue().get(key);
            if (StringUtils.isNotEmpty(identifier) && identifier.equals(uniqueIdentifier))
                stringRedisTemplate.delete(key);
        } catch (Exception e) {
            logger.error("[Redisé”] è§£é”å‡ºç°å¼‚å¸¸äº†ï¼Œ{}", e);
        }
    }
}
```

### 7.1 Rediså’ŒRedission

#### Redisåˆ†å¸ƒå¼é”çš„ä¸è¶³ï¼š

> 1.é€šè¿‡setnxè®¾ç½®é”åå†è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ­¤æ—¶å¦‚æœå®•æœºäº†ï¼Œé”æ²¡æœ‰è¿‡æœŸæ—¶é—´å°±ä¼šé€ æˆæ­»é”(é€šè¿‡setIfAbsent(lockKey, uuid,10*1000, TimeUnit.SECONDS)è§£å†³)
>
> 2.ä»»åŠ¡è¶…æ—¶ï¼Œå¯¼è‡´å…¶å®ƒçº¿ç¨‹åˆ é™¤äº†ä¸æ˜¯å½“å‰çº¿ç¨‹çš„key(å¯ä»¥ä½¿ç”¨å”¯ä¸€æ ‡è¯†uuid+æ—¶é—´æˆ³å»è¿›è¡Œæ¯”è¾ƒ)
>
> 3.é”çš„å¤±æ•ˆæœŸä¸å®¹æ˜“æ§åˆ¶ï¼Œå¦‚æœè¿‡å°ä»»åŠ¡å¯èƒ½æ‰§è¡Œä¸å®Œé”å°±è¢«å…¶å®ƒçº¿ç¨‹æ‹¿åˆ°äº†ï¼Œè¿‡å¤§å®•æœºäº†å¯èƒ½å¯¼è‡´æ­»é”(æ­¤æ—¶å¯ä»¥ä½¿ç”¨å®ˆæŠ¤çº¿ç¨‹è¿›è¡Œå¾ªç¯æ·»åŠ è¿‡æœŸæ—¶é—´ï¼Œä¿è¯ä»»åŠ¡èƒ½åœ¨æ‹¿åˆ°é”çš„æœŸé—´æ‰§è¡Œå®Œæˆ)

```java
String lockKey = "lockKey";
String uuid = UUID.randomUUID().toString();
try {
    // è®¾ç½®setnxå¹¶ä¸”è®¾ç½®è¿‡æœŸæ—¶é—´
    Boolean flag = stringRedisTemplate.opsForValue().setIfAbsent(lockKey, uuid,10*1000, TimeUnit.SECONDS);
    if(flag){
        Integer stock =  Integer.parseInt(stringRedisTemplate.opsForValue().get("stock"));
        if(stock>0){
            int resultStock = stock - 1;
            stringRedisTemplate.opsForValue().set("stock",resultStock+"");
            System.out.println("å‰©ä½™åº“å­˜ï¼š"+resultStock);
        }else{
            System.out.println("å‰©ä½™åº“å­˜ä¸è¶³ï¼š");
        }

    }else{
        System.out.println("æœªè·å–åˆ°é”");
    }

}finally {
    // é˜²æ­¢ä»»åŠ¡è¶…æ—¶ï¼Œå…¶å®ƒçº¿ç¨‹åˆ é™¤å½“å‰çº¿ç¨‹çš„key
    if(uuid.equals(stringRedisTemplate.opsForValue().get(lockKey))){
        stringRedisTemplate.delete(lockKey);
    }
}
```

#### Redisson

Reddissionçš„å·¥ä½œåŸç†ï¼š

   è¿ç”¨luaè„šæœ¬è¿›è¡Œè®¾ç½®é”ï¼Œå’Œreddiså¼‚æ›²åŒå·¥

<img src="picture\reddisson.png" alt="reddisson" style="zoom:67%;" />



å¼•å…¥ä¾èµ–ä¹‹åè¿˜è¦åŠ å…¥

```java
@Bean
public RedissonClient getRedisson(){
    Config config = new Config();
    //å•æœºæ¨¡å¼  ä¾æ¬¡è®¾ç½®redisåœ°å€å’Œå¯†ç 
    config.useSingleServer().
            setAddress("redis://127.0.0.1:6379").
            setPassword("123456");
    return Redisson.create(config);
}
```



```java
@GetMapping("/deductStockRedission")
public String deductStockRedission(){
    String lockKey = "lockKey";
    RLock redissonLock = redissonClient.getLock(lockKey);

    try {
        //redissonLock.lock();  // å¦‚æœçº¿ç¨‹æ²¡æœ‰è·å–åˆ°é”åˆ™ä¼šæ’é˜Ÿç­‰å¾…
        /**
         * å°è¯•è·å–é”
         * waitTimeout å°è¯•è·å–é”çš„æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªå€¼ï¼Œåˆ™è®¤ä¸ºè·å–é”å¤±è´¥
         * leaseTime   é”çš„æŒæœ‰æ—¶é—´,è¶…è¿‡è¿™ä¸ªæ—¶é—´é”ä¼šè‡ªåŠ¨å¤±æ•ˆï¼ˆå€¼åº”è®¾ç½®ä¸ºå¤§äºä¸šåŠ¡å¤„ç†çš„æ—¶é—´ï¼Œç¡®ä¿åœ¨é”æœ‰æ•ˆæœŸå†…ä¸šåŠ¡èƒ½å¤„ç†å®Œï¼‰
         */
        if(redissonLock.tryLock()){
            Integer stock =  Integer.parseInt(stringRedisTemplate.opsForValue().get("stock"));
            if(stock>0){
                int resultStock = stock - 1;
                stringRedisTemplate.opsForValue().set("stock",resultStock+"");
                System.out.println("å‰©ä½™åº“å­˜ï¼š"+resultStock);
            }else{
                System.out.println("å‰©ä½™åº“å­˜ä¸è¶³ï¼š");
            }
        }else{
            System.out.println("è·å–ä¸åˆ°é”");
        }

    }finally {
        if(redissonLock.isLocked()){ // æ˜¯å¦è¿˜æ˜¯é”å®šçŠ¶æ€
            if(redissonLock.isHeldByCurrentThread()){ // æ—¶å€™æ˜¯å½“å‰æ‰§è¡Œçº¿ç¨‹çš„é”
                redissonLock.unlock(); // é‡Šæ”¾é”
            }
        }
    }

    return "end";
}
```



## 7 Redis å’ŒZookpeerçš„åŒºåˆ«

<img src="picture\reddisson.png" alt="reddisson" style="zoom:60%;" />

Redisçš„ä¸»ä»å¤åˆ¶ï¼Œå“¨å…µï¼Œé›†ç¾¤ç­‰éƒ½æ˜¯CPåŸåˆ™(é«˜å¯ç”¨å’Œåˆ†åŒºå®¹é”™æ€§)

> ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè™½ç„¶æ•ˆç‡éå¸¸é«˜ï¼Œå› ä¸ºçº¿ç¨‹1åŠ é”æˆåŠŸï¼ŒRedisçš„ä¸»èŠ‚ç‚¹ç›´æ¥è¿”å›äº†ç»“æœä¹‹åæ‰ä¼šç»™Redisçš„ä»èŠ‚ç‚¹æ·»åŠ keyå€¼ï¼Œæ­¤æ—¶å¦‚æœä¸»èŠ‚ç‚¹çªç„¶æŒ‚æ‰è¿˜æ²¡æœ‰æ¥å¾—åŠç»™Redisçš„ä»èŠ‚ç‚¹æ·»åŠ keyå€¼ï¼ŒRedisé€‰ä¸¾Redisçš„ä»èŠ‚ç‚¹æˆä¸ºäº†ä¸»èŠ‚ç‚¹ï¼Œè¿™æ—¶çº¿ç¨‹1è¿˜åœ¨è¿›è¡ŒåŠ é”æ“ä½œï¼Œçº¿ç¨‹2åŒæ—¶ä¹Ÿè·å–åˆ°äº†é”ï¼Œæ­¤æ—¶å°±ä¼šå‡ºç°é”å¤±æ•ˆé—®é¢˜

Zookpeeræ˜¯APåŸåˆ™(ä¸€è‡´æ€§å’Œåˆ†åŒºå®¹é”™æ€§)

> Zookpeeræ˜¯ä¸»èŠ‚ç‚¹æ·»åŠ å®Œkeyå€¼åä¸ç«‹å³è¿”å›ç»“æœï¼Œè€Œæ˜¯ä»èŠ‚ç‚¹ä¹ŸæˆåŠŸæ·»åŠ äº†keyå€¼æ‰ä¼šè¿”å›ç»“æœï¼Œè™½ç„¶è§£å†³äº†Redisçš„é”å¤±æ•ˆé—®é¢˜ï¼Œä½†æ˜¯æ•ˆç‡æ˜æ˜¾ä¸å¦‚Redis

























# é‡ç‚¹è¿›é˜¶çŸ¥è¯†

## 1.ThreadLocal

> **å‚è€ƒæ–‡çŒ®ï¼š**https://baijiahao.baidu.com/s?id=1653790035315010634&wfr=spider&for=pc

**ä»£ç ï¼š**

   **å·¥å…·ç±»ï¼štaimeiKnowledge\src\main\java\com\zys\taimeiknowledge\util\SystemContext.java**

   **æµ‹è¯•ç”¨ä¾‹ï¼štaimeiKnowledge\src\main\java\com\zys\taimeiknowledge\Test\ThreadLocal\ThreadLocalTest.java**

**ThreadLocalè§£å†³è·¨çº¿ç¨‹é—®é¢˜ï¼š**

```java
    ExecutorService executorService =
                Executors.newFixedThreadPool(5);
        
        SystemContext.put("tm","111");
        Map<String, String> contextMap = SystemContext.getContextMap();
        executorService.execute(new Runnable() {
            @SneakyThrows
            @Override
            public void run() {
                System.out.println(Thread.currentThread().getName()+"---->"+SystemContext.get("tm"));
            }
        });

        // è·¨çº¿ç¨‹èµ‹å€¼ThreadLocal(å…¶å®å°±æ˜¯æŠŠThreadLocalå†æ¬¡èµ‹å€¼åˆ°æ–°çš„çº¿ç¨‹é‡Œ)
        executorService.execute(new Runnable() {
            @Override
            public void run() {
                // å¼€å¯äº†æ–°çš„çº¿ç¨‹ï¼Œmainå‡½æ•°çš„ThreadLocalå€¼æ‹¿ä¸åˆ°ï¼Œåªèƒ½å†æ¬¡èµ‹å€¼
                SystemContext.setContextMap(contextMap);
                System.out.println(Thread.currentThread().getName()+"---->"+SystemContext.get("tm"));
            }
        });


        // mainå‡½æ•°çš„ThreadLocal
        System.out.println(Thread.currentThread().getName()+"---->"+SystemContext.get("tm"));
```



## 2.çº¿ç¨‹æ± 

> **å‚è€ƒæ–‡çŒ®ï¼š**https://blog.csdn.net/mu_wind/article/details/113806680

**ä»£ç ï¼š**

  **æµ‹è¯•ç”¨ä¾‹ï¼štaimeiKnowledge\src\main\java\com\zys\taimeiknowledge\Test\ThreadPool**



## 3.TransmittableThreadLocal

  **é˜¿é‡Œç”¨æ¥è§£å†³ThreadLocalè·¨çº¿ç¨‹é—®é¢˜çš„ä¸­é—´ä»¶**



## 4.å¼ºå¼•ç”¨ï¼Œè½¯å¼•ç”¨ï¼Œå¼±å¼•ç”¨å’Œè™šå¼•ç”¨

> **å‚è€ƒæ–‡çŒ®ï¼š**https://blog.csdn.net/junjunba2689/article/details/80601729

**1ï¼å¼ºå¼•ç”¨**ï¼š

    **ä»¥å‰æˆ‘ä»¬ä½¿ç”¨çš„å¤§éƒ¨åˆ†å¼•ç”¨å®é™…ä¸Šéƒ½æ˜¯å¼ºå¼•ç”¨ï¼Œè¿™æ˜¯ä½¿ç”¨æœ€æ™®éçš„å¼•ç”¨**ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å…·æœ‰å¼ºå¼•ç”¨ï¼Œé‚£å°±ç±»ä¼¼äºå¿…ä¸å¯å°‘çš„ç”Ÿæ´»ç”¨å“ï¼Œåƒåœ¾å›æ”¶å™¨ç»ä¸ä¼šå›æ”¶å®ƒã€‚**å½“å†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJavaè™šæ‹Ÿæœºå®æ„¿æŠ›å‡ºOutOfMemoryErroré”™è¯¯ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³é—®é¢˜**ã€‚

**2ã€è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰**:

   å¦‚æœä¸€ä¸ªå¯¹è±¡åªå…·æœ‰è½¯å¼•ç”¨ï¼Œé‚£å°±ç±»ä¼¼äºå¯æœ‰å¯ç‰©çš„ç”Ÿæ´»ç”¨å“ã€‚**å¦‚æœå†…å­˜ç©ºé—´è¶³å¤Ÿï¼Œåƒåœ¾å›æ”¶å™¨å°±ä¸ä¼šå›æ”¶å®ƒï¼Œå¦‚æœå†…å­˜ç©ºé—´ä¸è¶³äº†ï¼Œå°±ä¼šå›æ”¶è¿™äº›å¯¹è±¡çš„å†…å­˜ã€‚**åªè¦åƒåœ¾å›æ”¶å™¨æ²¡æœ‰å›æ”¶å®ƒï¼Œè¯¥å¯¹è±¡å°±å¯ä»¥è¢«ç¨‹åºä½¿ç”¨ã€‚**è½¯å¼•ç”¨å¯ç”¨æ¥å®ç°å†…å­˜æ•æ„Ÿçš„é«˜é€Ÿç¼“å­˜ã€‚**

**3ï¼å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰**:

â€‹    å¦‚æœä¸€ä¸ªå¯¹è±¡åªå…·æœ‰å¼±å¼•ç”¨ï¼Œé‚£å°±ç±»ä¼¼äºå¯æœ‰å¯ç‰©çš„ç”Ÿæ´»ç”¨å“ã€‚**å¼±å¼•ç”¨ä¸è½¯å¼•ç”¨çš„åŒºåˆ«åœ¨äºï¼šåªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡æ‹¥æœ‰æ›´çŸ­æš‚çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨åƒåœ¾å›æ”¶å™¨çº¿ç¨‹æ‰«æå®ƒ æ‰€ç®¡è¾–çš„å†…å­˜åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘ç°äº†åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸å¦ï¼Œéƒ½ä¼šå›æ”¶å®ƒçš„å†…å­˜ã€‚**ä¸è¿‡ï¼Œç”±äºåƒåœ¾å›æ”¶å™¨æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§å¾ˆä½çš„çº¿ç¨‹ï¼Œ å› æ­¤ä¸ä¸€å®šä¼šå¾ˆå¿«å‘ç°é‚£äº›åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚

**4ï¼è™šå¼•ç”¨ï¼ˆPhantomReferenceï¼‰**:

â€‹    â€œè™šå¼•ç”¨â€é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å½¢åŒè™šè®¾ï¼Œä¸å…¶ä»–å‡ ç§å¼•ç”¨éƒ½ä¸åŒï¼Œè™šå¼•ç”¨å¹¶ä¸ä¼šå†³å®šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±**å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åƒåœ¾å›æ”¶ã€‚è™šå¼•ç”¨ä¸»è¦ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶çš„æ´»åŠ¨**ã€‚è™šå¼•ç”¨ä¸è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºï¼š**è™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨**ã€‚å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ç¨‹åºå¯ä»¥é€šè¿‡åˆ¤æ–­å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦å·²ç»åŠ å…¥äº†è™šå¼•ç”¨ï¼Œæ¥äº†è§£è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°†è¦è¢«åƒåœ¾å›æ”¶ã€‚ç¨‹åºå¦‚æœå‘ç°æŸä¸ªè™šå¼•ç”¨å·²ç»è¢«åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å†…å­˜è¢«å›æ”¶ä¹‹å‰é‡‡å–å¿…è¦çš„è¡ŒåŠ¨ã€‚



## 5.Redis

### 5.1 ç¼“å­˜é›ªå´© ç¼“å­˜ç©¿é€ ç¼“å­˜å‡»ç©¿

>   **å‚è€ƒæ–‡çŒ®:**  https://www.cnblogs.com/xichji/p/11286443.html

### 5.2Redisçš„ä¸‰ç§é›†ç¾¤æ–¹å¼

> **å‚è€ƒæ–‡çŒ®ï¼š**https://www.cnblogs.com/51life/p/10233340.html

ä¸»ä»å¤åˆ¶ï¼›å“¨å…µï¼›**Redis-Cluster**é›†ç¾¤

### 5.3 Redisåˆ†å¸ƒå¼é”

### 5.4 Redisçš„å¤±æ•ˆç­–ç•¥

> **å‚è€ƒæ–‡çŒ®ï¼š**https://www.cnblogs.com/dudu2mama/p/11366292.html



### 6.æ•°æ®åº“çš„æ‚²è§‚å’Œä¹è§‚é”

> å‚è€ƒæ–‡çŒ®ï¼šhttps://www.cnblogs.com/kyoner/p/11318979.html